Гайд: Создание книг через правую кнопку на Blog.tsxЧто это?Создатель книг — это инструмент на странице Blog.tsx, который позволяет пользователям объединять блоги (содержащие маршруты) в интерактивные книги. Правая выдвигающаяся кнопка открывает панель, где можно настроить книгу: добавить блоги, разделить маршрут на отрезки, связать их с текстом и сохранить результат. На старте отрезки просто выделяются (без анимации), а будущие VIP-фичи (светящиеся линии) останутся скрытыми.Шаг 1: Открытие панелиГде найти: На странице Blog.tsx, если блог содержит хук {type: "route", id: "123"} (маршрут), появляется правый выдвигающийся блок (модальное окно или панель).
Как открыть: Клик по кнопке "Создать книгу" (иконка книги или текст) в правом верхнем углу.
Анимация: Панель появляется с эффектом slide-in (используй Framer Motion).

Шаг 2: Настройка книгиПанель содержит следующие поля и элементы:Название книги: Поле ввода (например, "Поход по Алтаю").
Классификация: Выпадающий список ("Достопримечательности", "События", "Смешанная").
Выбор блогов: Чекбоксы для добавления блогов пользователя (из localStorage или PostgreSQL).
Кастомная обложка:Загрузка изображения (до 2 МБ).
Выбор цвета фона (5 вариантов: белый, серый, синий и т.д.).
Выбор шрифта (Roboto, Montserrat из Google Fonts).

Настройка отрезков (если блог имеет маршрут):Карта: Отображает маршрут (Yandex Maps API, ограничение 5 км).
Разбиение маршрута:Drag-and-drop: Перетаскивай маркеры, чтобы разделить маршрут на отрезки (до 3 на старте).
Ручной ввод: Поля для координат (опционально).

Связь с абзацами: Выпадающий список для каждого отрезка (например, "Абзац 1: От старта до озера").
Выделение: Выбор цвета (синий, красный, зелёный) для подсветки отрезков на карте.
Кнопка "Протестировать": Показывает выделенный отрезок на карте.

Партнёрские слои (опционально):Переключатель "Показать предложения рядом" (вкл/выкл).
Если включено, отображает предложения Booking/Ostrovok в радиусе 5 км.

Шаг 3: ПредпросмотрКак работает: Кнопка "Предпросмотр" показывает книгу в режиме BookView.Левая страница: Карта с выделенными отрезками.
Правая страница: Текст абзаца и фото из выбранного блога.

Цель: Убедиться, что всё выглядит правильно перед сохранением.

Шаг 4: СохранениеКнопки:"Сохранить черновик": Сохраняет книгу в localStorage (для оффлайн-редактирования).
"Опубликовать": Отправляет книгу в PostgreSQL, делает её видимой в центре влияния.

Подтверждение: Появляется сообщение "Книга сохранена!".

Технические деталиКомпонент: Создай BookCreator внутри Blog.tsx.
Данные:Структура книги:

{
  title: string,
  category: string,
  blogs: string[], // IDs блогов
  cover: { image: string, color: string, font: string },
  segments: [
    { id: string, paragraphId: string, coordinates: number[][], highlight: string }
  ]
}

Храни черновики в localStorage, опубликованные — в PostgreSQL.

API: Добавь эндпоинт в src/services/bookService.ts для сохранения (POST /books).
Стили: Используй Tailwind CSS (панель: bg-gray-100, кнопки: bg-blue-500).
Анимация: Framer Motion для slide-in панели и подсветки отрезков.

СоветыПростота: Ограничь отрезки 3 штуками на старте, чтобы не перегружать.
Обратная связь: Добавь тултип "Перетащите маркер для разделения маршрута".
Подготовка к VIP: Заложи код для анимаций (например, "Gradient"), но спрячь с пометкой "Скоро в VIP!".

Пример использованияОткрываешь Blog.tsx с маршрутом "Поход по горам".
Кликаешь "Создать книгу".
Вводишь название "Горный путь", выбираешь блог, делишь маршрут на 2 отрезка (от начала до реки, от реки до вершины).
Выбираешь синий цвет для выделения, загружаешь фото для обложки.
Проверяешь в предпросмотре, сохраняешь черновик.

ИтогЭтот гайд даёт тебе чёткий план для создателя книг на Blog.tsx. Правая кнопка открывает простую панель для настройки книги, разделения маршрута на отрезки и сохранения. Это базовая версия, готовая к запуску, с подготовкой к будущим VIP-фитурам. Если что-то неясно, напиши — разберёмся!

