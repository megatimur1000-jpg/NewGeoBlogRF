ПЛАН РЕАЛИЗАЦИИ: "Маршруты" в избранном
1. Архитектура и типы данных
Описать тип маршрута (RouteData): id, название, массив id меток, дата создания, опционально — описание, длина, иконка.
Убедиться, что структура меток (MarkerData) согласована с маршрутами.
2. UI/UX FavoritesPanel
Добавить/переделать вкладку "Маршруты" в избранном.
Список маршрутов: название, количество точек, дата, кнопки "Показать на карте", "Удалить".
Кнопка "Сохранить маршрут" (активна, если <3 маршрутов, иначе баннер/блокировка).
Для VIP — отсутствие лимита.
3. Логика сохранения и удаления маршрутов
Сохранять маршрут в локальное состояние (и/или БД, если пользователь авторизован).
Удалять маршрут из избранного.
Проверять лимит (3 маршрута для обычных, безлимит для VIP).
4. Отображение маршрута на карте
При выборе маршрута — подсветить все метки-участники маршрута.
Провести пунктирную линию между ними в заданном порядке.
Подсветить мини-попапы.
4. Пошаговый план реализации
Шаг 1. API-интеграция (универсально)
Создать/доработать src/api/routes.ts с функциями для работы с backend.
Шаг 2. UI/UX для обычных пользователей
Ограничение на количество меток и маршрутов.
Простая анимация построения маршрута (линии, точки).
Шаг 3. UI/UX для VIP
Проверка роли пользователя.
Реализация "оживления" маршрута: анимация движения, появление мини-попапов, подсветка.
Шаг 4. Интеграция в FavoritesPanel и planner.tsx
Возможность выбрать маршрут, запустить анимацию, удалить маршрут и т.д.
5. Технические детали для анимации (VIP)
Можно использовать setTimeout/setInterval или requestAnimationFrame для пошаговой анимации.
Для "машинки" — SVG, кастомный компонент или даже gif.
Для мини-попапов — динамическое появление и подсветка (CSS-анимации, Tailwind transitions).
5. Фильтры и сортировка маршрутов
Фильтрация по дате, количеству точек, тематике.
Сортировка по дате, популярности и т.д.
6. Интеграция с planner.tsx
Возможность перенести маршрут в планировщик для редактирования/дальнейшей работы.
7. VIP-функции (архитектурно заложить)
Для VIP — интеллектуальный гид, рекомендации, отсутствие лимитов.
ПЕРВЫЙ ЭТАП (сегодня):
FavoritesPanel — вкладка "Маршруты" с базовой логикой и мок-данными
Описать тип маршрута (RouteData).
Добавить вкладку "Маршруты" в избранном.
Вывести список маршрутов (мок-данные).
Кнопка "Сохранить маршрут" (с учётом лимита).
Кнопка "Удалить маршрут".
Баннер/блокировка при превышении лимита.
Дальнейшие этапы (после базовой вкладки):
Реализация сохранения маршрута из planner/map.
Интеграция с картой: подсветка, пунктирная линия, мини-попапы.
Фильтры и сортировка.
Интеграция с backend (если нужно).
VIP-функции и интеллектуальный гид.