 –ö–û–ù–¶–ï–ü–¶–ò–Ø –°–û–í–†–ï–ú–ï–ù–ù–û–ì–û –ß–ê–¢–ê –î–õ–Ø TRAVEL-–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
üìã –û–ë–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–∞
// –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
interface ChatSystem {
  conversations: Conversation[]
  users: User[]
  messages: Message[]
  archives: Archive[]
  roles: Role[]
  permissions: Permission[]
}

interface Conversation {
  id: string
  type: 'direct' | 'group' | 'channel' | 'travel_group'
  name?: string
  description?: string
  avatar?: string
  participants: Participant[]
  settings: ConversationSettings
  metadata: ConversationMetadata
  createdAt: Date
  updatedAt: Date
}
üé≠ –°–ò–°–¢–ï–ú–ê –†–û–õ–ï–ô –ò –ü–†–ê–í
üëë –†–æ–ª–∏ –≤ —á–∞—Ç–∞—Ö
enum ChatRole {
  OWNER = 'owner',           // –°–æ–∑–¥–∞—Ç–µ–ª—å —á–∞—Ç–∞
  ADMIN = 'admin',           // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  MODERATOR = 'moderator',   // –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä
  GUIDE = 'guide',           // –ì–∏–¥ (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è travel)
  TRAVELER = 'traveler',     // –ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫
  MEMBER = 'member',         // –û–±—ã—á–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫
  GUEST = 'guest'            // –ì–æ—Å—Ç—å (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞)
}

interface RolePermissions {
  [ChatRole.OWNER]: {
    canDelete: true,
    canEditSettings: true,
    canManageRoles: true,
    canKickUsers: true,
    canArchive: true,
    canPin: true,
    canMute: true
  },
  [ChatRole.ADMIN]: {
    canEditSettings: true,
    canManageRoles: ['moderator', 'member', 'guest'],
    canKickUsers: true,
    canPin: true,
    canMute: true
  },
  [ChatRole.GUIDE]: {
    canPin: true,
    canCreatePolls: true,
    canShareLocation: true,
    canCreateEvents: true
  }
}
üí¨ –¢–ò–ü–´ –ß–ê–¢–û–í
üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–∞—Ç–æ–≤
enum ConversationType {
  // –õ–∏—á–Ω—ã–µ
  DIRECT = 'direct',                    // 1:1 —á–∞—Ç
  
  // –ì—Ä—É–ø–ø–æ–≤—ã–µ
  TRAVEL_GROUP = 'travel_group',        // –ì—Ä—É–ø–ø–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤
  CITY_CHAT = 'city_chat',             // –ß–∞—Ç –≥–æ—Ä–æ–¥–∞
  INTEREST_GROUP = 'interest_group',    // –ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
  
  // –ö–∞–Ω–∞–ª—ã
  NEWS_CHANNEL = 'news_channel',        // –ù–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª
  GUIDE_CHANNEL = 'guide_channel',      // –ö–∞–Ω–∞–ª –≥–∏–¥–∞
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ
  SUPPORT = 'support',                  // –ü–æ–¥–¥–µ—Ä–∂–∫–∞
  EMERGENCY = 'emergency'               // –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å–≤—è–∑—å
}
üìÅ –°–ò–°–¢–ï–ú–ê –ê–†–•–ò–í–û–í
üóÑÔ∏è –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
interface ArchiveSystem {
  categories: {
    byDate: ArchiveByDate[]
    byLocation: ArchiveByLocation[]
    byParticipants: ArchiveByParticipants[]
    byTags: ArchiveByTags[]
    favorites: FavoriteChats[]
  }
  
  searchFilters: {
    dateRange: DateRange
    participants: string[]
    messageType: MessageType[]
    hasMedia: boolean
    location?: GeoLocation
  }
}

interface ArchivedConversation extends Conversation {
  archivedAt: Date
  archiveReason: 'manual' | 'auto_inactive' | 'trip_ended'
  canRestore: boolean
  retentionPeriod: number // –¥–Ω–∏ –¥–æ —É–¥–∞–ª–µ–Ω–∏—è
}
üë• –£–ü–†–ê–í–õ–ï–ù–ò–ï –£–ß–ê–°–¢–ù–ò–ö–ê–ú–ò
üìä –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å—ã
interface Participant {
  userId: string
  role: ChatRole
  joinedAt: Date
  lastSeen: Date
  status: ParticipantStatus
  permissions: CustomPermissions
  travelInfo?: TravelInfo
}

enum ParticipantStatus {
  ONLINE = 'online',
  AWAY = 'away',
  BUSY = 'busy',
  TRAVELING = 'traveling',
  OFFLINE = 'offline'
}

interface TravelInfo {
  currentLocation?: GeoLocation
  travelDates?: DateRange
  destinations?: string[]
  travelStyle?: 'backpacker' | 'luxury' | 'business' | 'family'
}
üíå –°–ò–°–¢–ï–ú–ê –°–û–û–ë–©–ï–ù–ò–ô
üìù –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
interface Message {
  id: string
  conversationId: string
  senderId: string
  type: MessageType
  content: MessageContent
  metadata: MessageMetadata
  reactions: Reaction[]
  replies: Reply[]
  createdAt: Date
  editedAt?: Date
  deletedAt?: Date
}

enum MessageType {
  TEXT = 'text',
  IMAGE = 'image',
  VIDEO = 'video',
  AUDIO = 'audio',
  LOCATION = 'location',
  DOCUMENT = 'document',
  POLL = 'poll',
  EVENT = 'event',
  ROUTE = 'route',
  RECOMMENDATION = 'recommendation',
  SYSTEM = 'system'
}
üé® UI/UX –ö–û–ú–ü–û–ù–ï–ù–¢–´
üñºÔ∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞
// –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
interface ChatUI {
  sidebar: {
    conversationList: ConversationList
    searchBar: SearchBar
    filters: FilterPanel
    archiveAccess: ArchiveButton
  }
  
  mainArea: {
    chatHeader: ChatHeader
    messageArea: MessageArea
    inputArea: MessageInput
    participantsSidebar?: ParticipantsSidebar
  }
  
  modals: {
    participantManager: ParticipantManagerModal
    chatSettings: ChatSettingsModal
    archiveViewer: ArchiveViewerModal
    mediaViewer: MediaViewerModal
  }
}

// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è travel –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
interface TravelChatComponents {
  locationSharing: LocationSharingWidget
  routePlanning: RoutePlanningWidget
  eventCreator: EventCreatorWidget
  recommendationCard: RecommendationCard
  weatherWidget: WeatherWidget
  currencyConverter: CurrencyConverterWidget
}
üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø
‚ö° –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
// Frontend (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º)
interface TechStack {
  framework: 'React + TypeScript'
  styling: 'Tailwind CSS'
  stateManagement: 'Zustand | Redux Toolkit'
  realtime: 'Socket.io-client'
  routing: 'React Router'
  
  // –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —á–∞—Ç–∞
  additional: {
    'react-window': '–≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤',
    'emoji-picker-react': '—ç–º–æ–¥–∑–∏',
    'react-mentions': '—É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
    'react-dropzone': '–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤',
    'date-fns': '—Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏',
    'fuse.js': '–ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º'
  }
}

// Backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
interface BackendArchitecture {
  api: 'REST API + GraphQL subscriptions'
  realtime: 'Socket.io | WebRTC –¥–ª—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤'
  database: 'PostgreSQL + Redis –¥–ª—è –∫—ç—à–∞'
  fileStorage: 'AWS S3 | Cloudinary'
  search: 'Elasticsearch –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º'
  notifications: 'Push notifications + Email'
}
üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ Chat/
‚îÇ       ‚îú‚îÄ‚îÄ ChatContainer.tsx
‚îÇ       ‚îú‚îÄ‚îÄ ConversationList/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ConversationItem.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ConversationSearch.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ConversationFilters.tsx
‚îÇ       ‚îú‚îÄ‚îÄ MessageArea/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MessageList.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MessageItem.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MessageInput.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ MessageReactions.tsx
‚îÇ       ‚îú‚îÄ‚îÄ ParticipantsPanel/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ParticipantsList.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ParticipantItem.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ RoleManager.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Archive/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ArchiveViewer.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ArchiveFilters.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ArchiveSearch.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Travel/
‚îÇ           ‚îú‚îÄ‚îÄ LocationSharing.tsx
‚îÇ           ‚îú‚îÄ‚îÄ RouteSharing.tsx
‚îÇ           ‚îî‚îÄ‚îÄ TravelRecommendations.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ chat/
‚îÇ       ‚îú‚îÄ‚îÄ useChat.ts
‚îÇ       ‚îú‚îÄ‚îÄ useMessages.ts
‚îÇ       ‚îú‚îÄ‚îÄ useParticipants.ts
‚îÇ       ‚îî‚îÄ‚îÄ useArchive.ts
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îî‚îÄ‚îÄ chatStore.ts
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ chat.ts
üöÄ –ö–õ–Æ–ß–ï–í–´–ï –§–ò–ß–ò
‚ú® –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è travel-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
interface TravelChatFeatures {
  // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç—ã
  locationSharing: {
    realTimeLocation: boolean
    locationHistory: GeoLocation[]
    nearbyTravelers: User[]
    safetyFeatures: EmergencyContacts[]
  }
  
  // –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π
  tripPlanning: {
    sharedItineraries: Itinerary[]
    expenseSharing: ExpenseTracker
    documentSharing: TravelDocument[]
    weatherUpdates: WeatherInfo[]
  }
  
  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –æ—Ç–∑—ã–≤—ã
  recommendations: {
    placeRecommendations: PlaceRecommendation[]
    restaurantSuggestions: RestaurantInfo[]
    activitySharing: Activity[]
    photoSpotSharing: PhotoSpot[]
  }
  
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  safety: {
    emergencyContacts: EmergencyContact[]
    checkInReminders: CheckInReminder[]
    locationSharing: SafeLocationSharing
    sosButton: SOSFeature
  }
}
üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
interface AdvancedFeatures {
  // AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
  aiFeatures: {
    smartReplies: string[]
    languageTranslation: TranslationService
    travelAssistant: AIAssistant
    photoRecognition: PhotoAnalysis
  }
  
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  integrations: {
    mapIntegration: MapService
    bookingServices: BookingAPI[]
    weatherServices: WeatherAPI
    currencyExchange: CurrencyAPI
  }
  
  // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
  analytics: {
    messageStats: MessageAnalytics
    participantActivity: ActivityStats
    popularDestinations: DestinationStats
    travelTrends: TrendAnalysis
  }
}
üì± –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –ò UX
üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞
// –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –¥–ª—è —á–∞—Ç–∞
:root {
  --chat-primary: #3B82F6;
  --chat-secondary: #10B981;
  --chat-accent: #F59E0B;
  --chat-danger: #EF4444;
  
  --message-own: #3B82F6;
  --message-other: #F3F4F6;
  --message-system: #6B7280;
  
  --online-status: #10B981;
  --away-status: #F59E0B;
  --offline-status: #6B7280;
}

// –ê–Ω–∏–º–∞—Ü–∏–∏
.message-enter {
  @apply opacity-0 transform translate-y-2;
}
.message-enter-active {
  @apply opacity-100 transform translate-y-0 transition-all duration-200;
}
üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
interface ResponsiveDesign {
  mobile: {
    layout: 'single-column'
    navigation: 'bottom-tabs'
    gestures: ['swipe-to-reply', 'long-press-menu']
    features: ['voice-messages', 'quick-camera']
  }
  
  tablet: {
    layout: 'two-column'
    features: ['split-view', 'drag-and-drop']
  }
  
  desktop: {
    layout: 'three-column'
    features: ['keyboard-shortcuts', 'multi-window']
    shortcuts: {
      'Ctrl+K': 'quick-search',
      'Ctrl+N': 'new-chat',
      'Ctrl+Shift+A': 'archive-chat'
    }
  }
}
üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ü–†–ò–í–ê–¢–ù–û–°–¢–¨
üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
interface SecurityFeatures {
  encryption: {
    messageEncryption: 'end-to-end'
    fileEncryption: 'AES-256'
    keyManagement: 'automatic-rotation'
  }
  
  privacy: {
    messageRetention: '90-days-default'
    dataExport: 'GDPR-compliant'
    anonymization: 'auto-after-deletion'
  }
  
  moderation: {
    autoModeration: 'AI-powered'
    reportSystem: 'user-reports'
    contentFiltering: 'customizable'
  }
}
üéâ –ì–û–¢–û–í–´–ô –ü–†–û–ú–ü–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò
# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï: –°–ò–°–¢–ï–ú–ê –ß–ê–¢–ê –î–õ–Ø TRAVEL-–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —á–∞—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—Ä—Ö–∏–≤–æ–≤, —Ä–æ–ª–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π —Ñ—É–Ω–∫—Ü–∏–π.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. **–ú–Ω–æ–≥–æ–æ–∫–æ–Ω–Ω—ã–π —á–∞—Ç** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
2. **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π** - Owner, Admin, Moderator, Guide, Traveler, Member, Guest
3. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏ —Ä—É—á–Ω–æ–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–∏—Å–∫–æ–º
4. **Travel-—Ñ—É–Ω–∫—Ü–∏–∏** - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –º–∞—Ä—à—Ä—É—Ç—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- Frontend: React + TypeScript + Tailwind CSS
- State: Zustand –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–∞—Ç–∞
- Realtime: Socket.io –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- UI: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (1-2 –Ω–µ–¥–µ–ª–∏)
2. –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (1 –Ω–µ–¥–µ–ª—è)
3. –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ (1 –Ω–µ–¥–µ–ª—è)
4. Travel-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (2 –Ω–µ–¥–µ–ª–∏)
5. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (2-3 –Ω–µ–¥–µ–ª–∏)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å LayoutContext –∏ SideContentContext
–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏ –∏–∑ Tailwind CSS
–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–Ω–æ–≥–æ–æ–∫–æ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
–î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
üèóÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞
// src/components/Chat/ChatContainer.tsx
interface ChatContainerProps {
  isMultiWindow?: boolean
  initialConversationId?: string
  position?: 'sidebar' | 'main' | 'popup'
}

const ChatContainer: React.FC<ChatContainerProps> = ({
  isMultiWindow = false,
  initialConversationId,
  position = 'main'
}) => {
  const { conversations, activeConversation, setActiveConversation } = useChatStore()
  const { isMobile } = useResponsive()
  
  return (
    <div className={`chat-container ${position} ${isMobile ? 'mobile' : 'desktop'}`}>
      {!isMobile && (
        <ConversationSidebar 
          conversations={conversations}
          activeId={activeConversation?.id}
          onSelect={setActiveConversation}
        />
      )}
      
      <ChatMainArea 
        conversation={activeConversation}
        isMultiWindow={isMultiWindow}
      />
      
      {activeConversation && (
        <ParticipantsPanel 
          participants={activeConversation.participants}
          currentUserRole={getCurrentUserRole()}
        />
      )}
    </div>
  )
}
üí¨ –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
// src/components/Chat/MessageArea/MessageList.tsx
import { FixedSizeList as List } from 'react-window'

interface MessageListProps {
  messages: Message[]
  conversationId: string
  onLoadMore: () => void
}

const MessageList: React.FC<MessageListProps> = ({ 
  messages, 
  conversationId, 
  onLoadMore 
}) => {
  const listRef = useRef<List>(null)
  const [isAtBottom, setIsAtBottom] = useState(true)
  
  // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º
  useEffect(() => {
    if (isAtBottom && listRef.current) {
      listRef.current.scrollToItem(messages.length - 1)
    }
  }, [messages.length, isAtBottom])
  
  const MessageItem = ({ index, style }: { index: number, style: any }) => {
    const message = messages[index]
    const isOwn = message.senderId === getCurrentUserId()
    const showAvatar = !isOwn && shouldShowAvatar(message, messages[index - 1])
    
    return (
      <div style={style} className="message-wrapper">
        <MessageBubble 
          message={message}
          isOwn={isOwn}
          showAvatar={showAvatar}
          onReply={() => handleReply(message)}
          onReact={(emoji) => handleReaction(message.id, emoji)}
        />
      </div>
    )
  }
  
  return (
    <div className="message-list-container">
      <List
        ref={listRef}
        height={600}
        itemCount={messages.length}
        itemSize={80} // –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä
        onScroll={handleScroll}
      >
        {MessageItem}
      </List>
      
      {!isAtBottom && (
        <ScrollToBottomButton onClick={scrollToBottom} />
      )}
    </div>
  )
}
üé≠ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏
// src/components/Chat/ParticipantsPanel/RoleManager.tsx
const RoleManager: React.FC<{ participant: Participant }> = ({ participant }) => {
  const { currentUser, updateParticipantRole } = useChatStore()
  const canManageRoles = hasPermission(currentUser.role, 'canManageRoles')
  
  const availableRoles = getAvailableRoles(currentUser.role)
  
  const handleRoleChange = async (newRole: ChatRole) => {
    try {
      await updateParticipantRole(participant.userId, newRole)
      toast.success(`–†–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ ${getRoleDisplayName(newRole)}`)
    } catch (error) {
      toast.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–ª–∏')
    }
  }
  
  return (
    <div className="role-manager">
      <div className="participant-info">
        <Avatar src={participant.avatar} size="md" />
        <div>
          <h4>{participant.name}</h4>
          <span className={`role-badge ${participant.role}`}>
            {getRoleDisplayName(participant.role)}
          </span>
        </div>
      </div>
      
      {canManageRoles && (
        <Dropdown>
          <DropdownTrigger>
            <Button variant="ghost" size="sm">
              <MoreVertical size={16} />
            </Button>
          </DropdownTrigger>
          <DropdownContent>
            {availableRoles.map(role => (
              <DropdownItem 
                key={role}
                onClick={() => handleRoleChange(role)}
              >
                –ù–∞–∑–Ω–∞—á–∏—Ç—å {getRoleDisplayName(role)}
              </DropdownItem>
            ))}
            <DropdownSeparator />
            <DropdownItem 
              className="text-red-600"
              onClick={() => handleKickUser(participant.userId)}
            >
              –ò—Å–∫–ª—é—á–∏—Ç—å –∏–∑ —á–∞—Ç–∞
            </DropdownItem>
          </DropdownContent>
        </Dropdown>
      )}
    </div>
  )
}
üìÅ –°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–æ–≤ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º –ø–æ–∏—Å–∫–æ–º
// src/components/Chat/Archive/ArchiveViewer.tsx
const ArchiveViewer: React.FC = () => {
  const [searchQuery, setSearchQuery] = useState('')
  const [filters, setFilters] = useState<ArchiveFilters>({
    dateRange: null,
    participants: [],
    messageTypes: [],
    hasMedia: false
  })
  
  const { archivedChats, searchArchive } = useArchiveStore()
  
  const filteredChats = useMemo(() => {
    return searchArchive(searchQuery, filters)
  }, [searchQuery, filters, archivedChats])
  
  return (
    <div className="archive-viewer">
      <div className="archive-header">
        <h2>–ê—Ä—Ö–∏–≤ —á–∞—Ç–æ–≤</h2>
        <div className="archive-stats">
          <span>{archivedChats.length} –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤</span>
          <span>{getTotalMessages(archivedChats)} —Å–æ–æ–±—â–µ–Ω–∏–π</span>
        </div>
      </div>
      
      <div className="archive-search">
        <SearchInput 
          value={searchQuery}
          onChange={setSearchQuery}
          placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º, —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –¥–∞—Ç–∞–º..."
        />
        
        <ArchiveFilters 
          filters={filters}
          onChange={setFilters}
        />
      </div>
      
      <div className="archive-results">
        {filteredChats.map(chat => (
          <ArchivedChatCard 
            key={chat.id}
            chat={chat}
            onRestore={() => handleRestore(chat.id)}
            onDelete={() => handlePermanentDelete(chat.id)}
          />
        ))}
      </div>
    </div>
  )
}
üó∫Ô∏è Travel-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
// src/components/Chat/Travel/LocationSharing.tsx
const LocationSharingWidget: React.FC = () => {
  const [isSharing, setIsSharing] = useState(false)
  const [currentLocation, setCurrentLocation] = useState<GeoLocation | null>(null)
  const { sendLocationMessage } = useChatStore()
  
  const handleShareLocation = async () => {
    try {
      const location = await getCurrentLocation()
      setCurrentLocation(location)
      
      await sendLocationMessage({
        type: 'location',
        coordinates: location,
        address: await reverseGeocode(location),
        timestamp: new Date(),
        accuracy: location.accuracy
      })
      
      toast.success('–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ')
    } catch (error) {
      toast.error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ')
    }
  }
  
  const handleShareRoute = async () => {
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–æ–≤
    const route = await openRoutePlanner()
    if (route) {
      await sendLocationMessage({
        type: 'route',
        waypoints: route.waypoints,
        distance: route.distance,
        duration: route.duration,
        transportType: route.transportType
      })
    }
  }
  
  return (
    <div className="location-sharing-widget">
      <div className="location-actions">
        <Button 
          onClick={handleShareLocation}
          className="location-btn"
          disabled={isSharing}
        >
          <MapPin size={16} />
          –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º
        </Button>
        
        <Button 
          onClick={handleShareRoute}
          variant="outline"
          className="route-btn"
        >
          <Route size={16} />
          –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –º–∞—Ä—à—Ä—É—Ç–æ–º
        </Button>
      </div>
      
      {currentLocation && (
        <div className="current-location">
          <span>üìç {currentLocation.address}</span>
          <Button 
            size="sm" 
            variant="ghost"
            onClick={() => setIsSharing(!isSharing)}
          >
            {isSharing ? '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å' : '–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å'}
          </Button>
        </div>
      )}
    </div>
  )
}
ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π
// src/components/Chat/Travel/TravelAssistant.tsx
const TravelAssistant: React.FC = () => {
  const [isActive, setIsActive] = useState(false)
  const [suggestions, setSuggestions] = useState<AISuggestion[]>([])
  
  const { messages, participants } = useChatStore()
  
  // –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  useEffect(() => {
    const analyzeContext = async () => {
      const context = {
        recentMessages: messages.slice(-10),
        participants: participants,
        location: await getCurrentLocation(),
        travelDates: extractTravelDates(messages)
      }
      
      const aiSuggestions = await getAISuggestions(context)
      setSuggestions(aiSuggestions)
    }
    
    if (isActive) {
      analyzeContext()
    }
  }, [messages, isActive])
  
  return (
    <div className="travel-assistant">
      <Button 
        onClick={() => setIsActive(!isActive)}
        className={`assistant-toggle ${isActive ? 'active' : ''}`}
      >
        <Bot size={16} />
        AI –ü–æ–º–æ—â–Ω–∏–∫
      </Button>
      
      {isActive && suggestions.length > 0 && (
        <div className="ai-suggestions">
          <h4>üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</h4>
          {suggestions.map(suggestion => (
            <div key={suggestion.id} className="suggestion-card">
              <div className="suggestion-content">
                <span className="suggestion-icon">{suggestion.icon}</span>
                <p>{suggestion.text}</p>
              </div>
              <Button 
                size="sm"
                onClick={() => applySuggestion(suggestion)}
              >
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å
              </Button>
            </div>
          ))}
        </div>
      )}
    </div>
  )
}
üîß –•—É–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
üíæ –û—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫ —á–∞—Ç–∞
// src/hooks/chat/useChat.ts
export const useChatStore = create<ChatStore>((set, get) => ({
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ
  conversations: [],
  activeConversation: null,
  messages: new Map(),
  participants: new Map(),
  typingUsers: new Set(),
  
  // –î–µ–π—Å—Ç–≤–∏—è
  setActiveConversation: (conversation) => {
    set({ activeConversation: conversation })
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
    if (conversation && !get().messages.has(conversation.id)) {
      get().loadMessages(conversation.id)
    }
  },
  
  sendMessage: async (content, type = 'text') => {
    const { activeConversation } = get()
    if (!activeConversation) return
    
    const message: Message = {
      id: generateId(),
      conversationId: activeConversation.id,
      senderId: getCurrentUserId(),
      type,
      content,
      createdAt: new Date(),
      reactions: [],
      replies: []
    }
    
    // –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    set(state => ({
      messages: new Map(state.messages).set(
        activeConversation.id,
        [...(state.messages.get(activeConversation.id) || []), message]
      )
    }))
    
    try {
      await chatAPI.sendMessage(message)
    } catch (error) {
      // –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
      set(state => ({
        messages: new Map(state.messages).set(
          activeConversation.id,
          state.messages.get(activeConversation.id)?.filter(m => m.id !== message.id) || []
        )
      }))
      throw error
    }
  },
  
  loadMessages: async (conversationId, offset = 0) => {
    const messages = await chatAPI.getMessages(conversationId, offset)
    set(state => ({
      messages: new Map(state.messages).set(conversationId, messages)
    }))
  },
  
  updateParticipantRole: async (userId, newRole) => {
    const { activeConversation } = get()
    if (!activeConversation) return
    
    await chatAPI.updateParticipantRole(activeConversation.id, userId, newRole)
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    set(state => ({
      participants: new Map(state.participants).set(
        activeConversation.id,
        state.participants.get(activeConversation.id)?.map(p => 
          p.userId === userId ? { ...p, role: newRole } : p
        ) || []
      )
    }))
  }
}))
üé® –°—Ç–∏–ª–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
üí´ CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —á–∞—Ç–∞
// src/styles/chat.scss
.chat-container {
  @apply h-full flex bg-white dark:bg-gray-900;
  
  .conversation-sidebar {
    @apply w-80 border-r border-gray-200 dark:border-gray-700;
    transition: width 0.3s ease;
    
    &.collapsed {
      @apply w-16;
    }
  }
  
  .chat-main-area {
    @apply flex-1 flex flex-col;
  }
  
  .participants-panel {
    @apply w-64 border-l border-gray-200 dark:border-gray-700;
    
    &.hidden {
      @apply w-0 overflow-hidden;
    }
  }
}

//
// –ê–Ω–∏–º–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
.message-bubble {
  @apply rounded-2xl px-4 py-2 max-w-xs break-words;
  animation: messageSlideIn 0.3s ease-out;
  
  &.own {
    @apply bg-blue-500 text-white ml-auto;
    border-bottom-right-radius: 4px;
  }
  
  &.other {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white;
    border-bottom-left-radius: 4px;
  }
  
  &.system {
    @apply bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 text-center text-sm;
  }
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

// –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
.typing-indicator {
  @apply flex items-center space-x-2 p-3;
  
  .typing-dots {
    @apply flex space-x-1;
    
    .dot {
      @apply w-2 h-2 bg-gray-400 rounded-full;
      animation: typingBounce 1.4s infinite ease-in-out;
      
      &:nth-child(1) { animation-delay: -0.32s; }
      &:nth-child(2) { animation-delay: -0.16s; }
    }
  }
}

@keyframes typingBounce {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

// –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
.message-reactions {
  @apply flex flex-wrap gap-1 mt-1;
  
  .reaction {
    @apply inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs;
    @apply bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700;
    @apply cursor-pointer transition-colors;
    
    &.active {
      @apply bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400;
    }
  }
}

// –°—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
.participant-status {
  @apply relative;
  
  &::after {
    content: '';
    @apply absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-gray-900;
  }
  
  &.online::after { @apply bg-green-500; }
  &.away::after { @apply bg-yellow-500; }
  &.busy::after { @apply bg-red-500; }
  &.traveling::after { @apply bg-blue-500; }
  &.offline::after { @apply bg-gray-400; }
}

// –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
@media (max-width: 768px) {
  .chat-container {
    .conversation-sidebar {
      @apply absolute inset-y-0 left-0 z-50 transform -translate-x-full;
      transition: transform 0.3s ease;
      
      &.open {
        @apply translate-x-0;
      }
    }
    
    .participants-panel {
      @apply hidden;
    }
  }
}
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
üî¨ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
// src/__tests__/chat/ChatContainer.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { ChatContainer } from '../components/Chat/ChatContainer'
import { ChatProvider } from '../contexts/ChatContext'

describe('ChatContainer', () => {
  const mockConversation = {
    id: '1',
    type: 'group',
    name: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –Ø–ø–æ–Ω–∏—é',
    participants: [
      { userId: '1', role: 'owner', name: '–ê–ª–µ–∫—Å–µ–π' },
      { userId: '2', role: 'member', name: '–ú–∞—Ä–∏—è' }
    ]
  }
  
  beforeEach(() => {
    render(
      <ChatProvider>
        <ChatContainer initialConversationId="1" />
      </ChatProvider>
    )
  })
  
  test('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤', async () => {
    await waitFor(() => {
      expect(screen.getByText('–ê–ª–µ–∫—Å–µ–π')).toBeInTheDocument()
      expect(screen.getByText('–ú–∞—Ä–∏—è')).toBeInTheDocument()
    })
  })
  
  test('–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ', async () => {
    const input = screen.getByPlaceholderText('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...')
    const sendButton = screen.getByRole('button', { name: /–æ—Ç–ø—Ä–∞–≤–∏—Ç—å/i })
    
    fireEvent.change(input, { target: { value: '–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!' } })
    fireEvent.click(sendButton)
    
    await waitFor(() => {
      expect(screen.getByText('–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!')).toBeInTheDocument()
    })
  })
  
  test('—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)', async () => {
    // –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∞
    const roleButton = screen.queryByText('–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å')
    
    if (getCurrentUserRole() === 'admin') {
      expect(roleButton).toBeInTheDocument()
    } else {
      expect(roleButton).not.toBeInTheDocument()
    }
  })
})

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
describe('Chat Integration', () => {
  test('real-time —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket', async () => {
    const { mockSocket } = setupMockSocket()
    
    render(<ChatContainer />)
    
    // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
    mockSocket.emit('message', {
      id: '123',
      content: '–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
      senderId: '2',
      timestamp: new Date()
    })
    
    await waitFor(() => {
      expect(screen.getByText('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ')).toBeInTheDocument()
    })
  })
})
üöÄ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
// cypress/integration/chat.spec.ts
describe('Chat System', () => {
  beforeEach(() => {
    cy.login('test@example.com', 'password')
    cy.visit('/chat')
  })
  
  it('—Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç', () => {
    cy.get('[data-testid="new-chat-button"]').click()
    cy.get('[data-testid="chat-type-group"]').click()
    
    cy.get('[data-testid="chat-name-input"]').type('–ü–æ–µ–∑–¥–∫–∞ –≤ –°–æ—á–∏')
    cy.get('[data-testid="add-participant"]').click()
    cy.get('[data-testid="user-search"]').type('maria@example.com')
    cy.get('[data-testid="user-maria"]').click()
    
    cy.get('[data-testid="create-chat"]').click()
    
    cy.url().should('include', '/chat/')
    cy.contains('–ü–æ–µ–∑–¥–∫–∞ –≤ –°–æ—á–∏').should('be.visible')
  })
  
  it('–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π', () => {
    cy.get('[data-testid="location-share-button"]').click()
    cy.get('[data-testid="current-location"]').click()
    
    cy.contains('üìç').should('be.visible')
    cy.get('[data-testid="location-message"]').should('exist')
  })
  
  it('–∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —á–∞—Ç', () => {
    cy.get('[data-testid="chat-menu"]').click()
    cy.get('[data-testid="archive-chat"]').click()
    cy.get('[data-testid="confirm-archive"]').click()
    
    cy.get('[data-testid="archived-chats"]').click()
    cy.contains('–ü–æ–µ–∑–¥–∫–∞ –≤ –°–æ—á–∏').should('be.visible')
  })
})
üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
üìà KPI —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–∞
// src/analytics/chatMetrics.ts
interface ChatMetrics {
  // –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  dailyActiveUsers: number
  messagesSentPerDay: number
  averageSessionDuration: number
  
  // –ö–∞—á–µ—Å—Ç–≤–æ –æ–±—â–µ–Ω–∏—è
  messagesPerConversation: number
  participantEngagement: number
  responseTime: number
  
  // Travel-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  locationSharesPerDay: number
  routesSharedPerDay: number
  travelGroupsCreated: number
  
  // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  messageDeliveryTime: number
  connectionUptime: number
  errorRate: number
}

export const trackChatEvent = (event: string, properties: any) => {
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π (Google Analytics, Mixpanel, etc.)
  analytics.track(event, {
    ...properties,
    timestamp: new Date(),
    userId: getCurrentUserId(),
    sessionId: getSessionId()
  })
}

// –ü—Ä–∏–º–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π
export const chatEvents = {
  messageSent: (messageType: string, conversationId: string) => 
    trackChatEvent('message_sent', { messageType, conversationId }),
    
  conversationCreated: (type: string, participantCount: number) =>
    trackChatEvent('conversation_created', { type, participantCount }),
    
  locationShared: (accuracy: number) =>
    trackChatEvent('location_shared', { accuracy }),
    
  chatArchived: (reason: string, messageCount: number) =>
    trackChatEvent('chat_archived', { reason, messageCount })
}
üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
// src/config/chatConfig.ts
export const chatConfig = {
  // –õ–∏–º–∏—Ç—ã
  maxMessageLength: 4000,
  maxFileSize: 50 * 1024 * 1024, // 50MB
  maxParticipants: 500,
  maxConversationsPerUser: 100,
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
  autoArchiveAfterDays: 90,
  messageRetentionDays: 365,
  typingIndicatorTimeout: 3000,
  
  // –§—É–Ω–∫—Ü–∏–∏
  features: {
    voiceMessages: true,
    videoMessages: true,
    locationSharing: true,
    fileSharing: true,
    messageReactions: true,
    messageReplies: true,
    messageForwarding: true,
    messageSearch: true,
    messageTranslation: true,
    aiAssistant: true
  },
  
  // Travel-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  travel: {
    maxLocationAccuracy: 100, // –º–µ—Ç—Ä—ã
    locationUpdateInterval: 30000, // 30 —Å–µ–∫—É–Ω–¥
    emergencyContactsLimit: 5,
    routeSharingEnabled: true,
    weatherIntegration: true,
    currencyConversion: true
  },
  
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  security: {
    messageEncryption: true,
    endToEndEncryption: false, // –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π
    autoModeration: true,
    spamDetection: true,
    profanityFilter: true
  }
}
üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
# docker-compose.yml –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
version: '3.8'
services:
  frontend:
    build: .
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://localhost:3000
      - VITE_SOCKET_URL=http://localhost:3001
    volumes:
      - .:/app
      - /app/node_modules
  
  chat-api:
    image: node:18-alpine
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@postgres:5432/chat_db
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis
  
  socket-server:
    image: node:18-alpine
    ports:
      - "3001:3001"
    environment:
      - REDIS_URL=redis://redis:6379
    depends_on:
      - redis
  
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=chat_db
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
üì¶ CI/CD Pipeline
# .github/workflows/deploy.yml
name: Deploy Chat System
on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run tests
        run: npm run test:coverage
      
      - name: Run E2E tests
        run: npm run test:e2e
  
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Build Docker image
        run: docker build -t chat-app:${{ github.sha }} .
      
      - name: Push to registry
        run: docker push chat-app:${{ github.sha }}
  
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to production
        run: |
          kubectl set image deployment/chat-app \
            chat-app=chat-app:${{ github.sha }}
üéØ Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è
üìÖ –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
## –§–∞–∑–∞ 1: MVP (4-6 –Ω–µ–¥–µ–ª—å)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (–±–∞–∑–æ–≤–∞—è)
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –§–∞–∑–∞ 2: Travel Features (3-4 –Ω–µ–¥–µ–ª–∏)
- üó∫Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏
- üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç—ã
- üå§Ô∏è –ü–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- üí± –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç
- üÜò –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –§–∞–∑–∞ 3: Advanced Features (4-5 –Ω–µ–¥–µ–ª—å)
- ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
- üîç –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–∏—Å–∫
- üìÅ –°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–æ–≤
- üé• –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
- üåê –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

## –§–∞–∑–∞ 4: Enterprise Features (

// –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π —á–∞—Ç–∞
.message-bubble {
  @apply rounded-2xl px-4 py-2 max-w-xs break-words;
  animation: messageSlideIn 0.3s ease-out;
  
  &.own {
    @apply bg-blue-500 text-white ml-auto;
    border-bottom-right-radius: 4px;
  }
  
  &.other {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white;
    border-bottom-left-radius: 4px;
  }
  
  &.system {
    @apply bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 text-center text-sm;
  }
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

// –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
.typing-indicator {
  @apply flex items-center space-x-2 p-3;
  
  .typing-dots {
    @apply flex space-x-1;
    
    .dot {
      @apply w-2 h-2 bg-gray-400 rounded-full;
      animation: typingBounce 1.4s infinite ease-in-out;
      
      &:nth-child(1) { animation-delay: -0.32s; }
      &:nth-child(2) { animation-delay: -0.16s; }
    }
  }
}

@keyframes typingBounce {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

// –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
.message-reactions {
  @apply flex flex-wrap gap-1 mt-1;
  
  .reaction {
    @apply inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs;
    @apply bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700;
    @apply cursor-pointer transition-colors;
    
    &.active {
      @apply bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400;
    }
  }
}

// –°—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
.participant-status {
  @apply relative;
  
  &::after {
    content: '';
    @apply absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-gray-900;
  }
  
  &.online::after { @apply bg-green-500; }
  &.away::after { @apply bg-yellow-500; }
  &.busy::after { @apply bg-red-500; }
  &.traveling::after { @apply bg-blue-500; }
  &.offline::after { @apply bg-gray-400; }
}

// –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
@media (max-width: 768px) {
  .chat-container {
    .conversation-sidebar {
      @apply absolute inset-y-0 left-0 z-50 transform -translate-x-full;
      transition: transform 0.3s ease;
      
      &.open {
        @apply translate-x-0;
      }
    }
    
    .participants-panel {
      @apply hidden;
    }
  }
}
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
üî¨ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
// src/__tests__/chat/ChatContainer.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { ChatContainer } from '../components/Chat/ChatContainer'
import { ChatProvider } from '../contexts/ChatContext'

describe('ChatContainer', () => {
  const mockConversation = {
    id: '1',
    type: 'group',
    name: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –Ø–ø–æ–Ω–∏—é',
    participants: [
      { userId: '1', role: 'owner', name: '–ê–ª–µ–∫—Å–µ–π' },
      { userId: '2', role: 'member', name: '–ú–∞—Ä–∏—è' }
    ]
  }
  
  beforeEach(() => {
    render(
      <ChatProvider>
        <ChatContainer initialConversationId="1" />
      </ChatProvider>
    )
  })
  
  test('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤', async () => {
    await waitFor(() => {
      expect(screen.getByText('–ê–ª–µ–∫—Å–µ–π')).toBeInTheDocument()
      expect(screen.getByText('–ú–∞—Ä–∏—è')).toBeInTheDocument()
    })
  })
  
  test('–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ', async () => {
    const input = screen.getByPlaceholderText('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...')
    const sendButton = screen.getByRole('button', { name: /–æ—Ç–ø—Ä–∞–≤–∏—Ç—å/i })
    
    fireEvent.change(input, { target: { value: '–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!' } })
    fireEvent.click(sendButton)
    
    await waitFor(() => {
      expect(screen.getByText('–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!')).toBeInTheDocument()
    })
  })
  
  test('—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)', async () => {
    const roleButton = screen.queryByText('–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å')
    
    if (getCurrentUserRole() === 'admin') {
      expect(roleButton).toBeInTheDocument()
    } else {
      expect(roleButton).not.toBeInTheDocument()
    }
  })
})
üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
üìà KPI —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–∞
// src/analytics/chatMetrics.ts
interface ChatMetrics {
  dailyActiveUsers: number
  messagesSentPerDay: number
  averageSessionDuration: number
  messagesPerConversation: number
  participantEngagement: number
  responseTime: number
  locationSharesPerDay: number
  routesSharedPerDay: number
  travelGroupsCreated: number
  messageDeliveryTime: number
  connectionUptime: number
  errorRate: number
}

export const trackChatEvent = (event: string, properties: any) => {
  analytics.track(event, {
    ...properties,
    timestamp: new Date(),
    userId: getCurrentUserId(),
    sessionId: getSessionId()
  })
}
üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
üèóÔ∏è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build: .
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://localhost:3000
      - VITE_SOCKET_URL=http://localhost:3001
    volumes:
      - .:/app
      - /app/node_modules
  
  chat-api:
    image: node:18-alpine
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@postgres:5432/chat_db
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis
  
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=chat_db
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
üéØ Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è
üìÖ –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–ª–∞–Ω
## –§–∞–∑–∞ 1: MVP (4-6 –Ω–µ–¥–µ–ª—å)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (–±–∞–∑–æ–≤–∞—è)
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –§–∞–∑–∞ 2: Travel Features (3-4 –Ω–µ–¥–µ–ª–∏)
- üó∫Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏
- üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç—ã
- üå§Ô∏è –ü–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- üí± –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç
- üÜò –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –§–∞–∑–∞ 3: Advanced Features (4-5 –Ω–µ–¥–µ–ª—å)
- ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
- üîç –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–∏—Å–∫
- üìÅ –°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–æ–≤
- üé• –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
- üåê –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

## –§–∞–∑–∞ 4: Enterprise Features (3-4 –Ω–µ–¥–µ–ª–∏)
- üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- üîê –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- üè¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üîå API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
üéâ –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ screen readers –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
UX - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –±—ã—Å—Ç—Ä—ã–º –æ—Ç–∫–ª–∏–∫–æ–º
üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install socket.io-client zustand react-window emoji-picker-react

# 2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
mkdir -p src/components/Chat/{MessageArea,ParticipantsPanel,Archive,Travel}
mkdir -p src/hooks/chat src/stores src/types

# 3. –ù–∞—á–Ω–∏—Ç–µ —Å ChatContainer.tsx
# 4. –î–æ–±–∞–≤—å—Ç–µ –±–∞–∑–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–π
# 5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º layout
üí° Pro Tips
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React.memo –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
–†–µ–∞–ª–∏–∑—É–π—Ç–µ debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
–î–æ–±–∞–≤—å—Ç–µ Service Worker –¥–ª—è offline-—Ä–µ–∂–∏–º–∞
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Web Workers –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
–≠—Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –¥–∞—Å—Ç –≤–∞–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é —Å–∏—Å—Ç–µ–º—É —á–∞—Ç–∞, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–ª—è travel-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤! üåü