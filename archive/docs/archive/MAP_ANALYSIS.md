# ðŸ—ºï¸ ÐÐ½Ð°Ð»Ð¸Ð· Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ°Ñ€Ñ‚ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Ð“ÐµÐ¾Ð‘Ð»Ð¾Ð³.Ñ€Ñ„

## ðŸ“ Ð’Ð¸Ð´Ñ‹ ÐºÐ°Ñ€Ñ‚ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ

### 1. **ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ (Leaflet)**
**ÐœÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `frontend/src/components/Map/Map.tsx`
**Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ:** Leaflet + React

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
- Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ð¹ (`/map`)
- ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² (`/planner`)
- ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð²ÑÐµ Ð¼Ð°Ñ€ÐºÐµÑ€Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
- Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸:
  - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ‚Ð¾Ðº
  - Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ
  - Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼
  - ÐŸÐ¾Ð¸ÑÐº
  - Ð Ð°Ð´Ð¸ÑƒÑ Ð¿Ð¾Ð¸ÑÐºÐ°
  - ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ñ‘Ð² (Ñ‚Ñ€Ð°Ñ„Ð¸Ðº, Ð²ÐµÐ»Ð¾ÑÐ¸Ð¿ÐµÐ´Ð½Ñ‹Ðµ Ð´Ð¾Ñ€Ð¾Ð¶ÐºÐ¸)
  - Ð›ÐµÐ³ÐµÐ½Ð´Ð°
  - Ð—Ð¾Ð½Ñ‹ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ð¹ (restricted zones)

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ MarkerCluster Ð´Ð»Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¼ÐµÑ‚Ð¾Ðº
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ RUSSIA_MAP_DEFAULT_CONFIG
- ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ñ‚ÐµÑ€Ñ€Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð Ð¾ÑÑÐ¸Ð¸
- Ð¢ÐµÐ¼Ð½Ð°Ñ/ÑÐ²ÐµÑ‚Ð»Ð°Ñ Ñ‚ÐµÐ¼Ð°
- ÐŸÐ¾Ð¿Ð°Ð¿Ñ‹ Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ Ð¾ Ð¼Ð°Ñ€ÐºÐµÑ€Ð°Ñ…

---

### 2. **ÐšÐ°Ñ€Ñ‚Ð° Ð´Ð»Ñ Ð¿Ð¾ÑÑ‚Ð¾Ð² (MapLibre GL)**
**ÐœÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `frontend/src/components/Posts/MapLibreMap.tsx`
**Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ:** MapLibre GL (react-map-gl/maplibre)

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
- ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ Ð¿Ð¾ÑÑ‚Ð¾Ð² (`PostConstructor`)
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾ÑÑ‚Ð¾Ð² (`CreatePostModal`)
- ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð¿Ð¾ÑÑ‚Ð¾Ð² (`PostPreview`)
- ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÑ‚Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ `MapLibre GL` ÐºÐ°Ðº Ð´Ð²Ð¸Ð¶Ð¾Ðº
- ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹: `Marker`, `Popup`, `Source`, `Layer` Ð¸Ð· `react-map-gl/maplibre`
- Ð¡Ñ‚Ð¸Ð»ÑŒ ÐºÐ°Ñ€Ñ‚Ñ‹: MapTiler Streets (`https://api.maptiler.com/maps/streets/style.json`)
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚
- ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚ [lng, lat]
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼Ð°Ñ€ÐºÐµÑ€Ð¾Ð², Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
- Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ð¾Ð¿Ð°Ð¿Ñ‹
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° GeoJSON Ð´Ð»Ñ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð²

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** 
- Ð’ Ð»Ð¾Ð³Ð°Ñ… Ð²Ð¸Ð´Ð½Ð¾ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº `/api/markers/:id` (Ð±Ð¾Ð»ÐµÐµ 100 Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²)
- Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ð¹ Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ» Ð¿ÐµÑ€ÐµÑ€Ð¸ÑÐ¾Ð²ÐºÐ¸ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð²ÑƒÑ… Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐº ÐºÐ°Ñ€Ñ‚ (Leaflet Ð¸ MapLibre) Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹

---

### 3. **ÐœÐ¸Ð½Ð¸-ÐºÐ°Ñ€Ñ‚Ñ‹ Ð´Ð»Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²**
**ÐœÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:**
- `frontend/src/components/Posts/MiniMapMarker.tsx`
- `frontend/src/components/Posts/MiniMapRoute.tsx`

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
- ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð¼Ð°Ñ€ÐºÐµÑ€Ð¾Ð² Ð² Ð¿Ð¾ÑÑ‚Ð°Ñ…
- ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð² Ð² Ð¿Ð¾ÑÑ‚Ð°Ñ…
- ÐŸÑ€ÐµÐ²ÑŒÑŽ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð² Ð¿Ð¾ÑÑ‚Ð°Ñ…

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ Ñ‚Ñƒ Ð¶Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑŽ MapLibre GL
- ÐšÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ð¾Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸)
- Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾ API

---

## ðŸ” ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 1: Ð”Ð²Ðµ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ ÐºÐ°Ñ€Ñ‚
**Leaflet (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð°) Ð¸ MapLibre GL (Ð¿Ð¾ÑÑ‚Ñ‹)**
- Ð Ð°Ð·Ð½Ñ‹Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ñ‹ Ðº Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³Ñƒ
- Ð Ð°Ð·Ð½Ñ‹Ðµ API
- Ð Ð°Ð·Ð½Ñ‹Ðµ ÑÑ‚Ð¸Ð»Ð¸
- ÐŸÐ¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð£Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð¾Ð´Ð½Ñƒ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 2: Ð‘ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ API
**Ð¡Ñ‚Ñ€Ð¾ÐºÐ¸ 920-1020 Ð² Ð»Ð¾Ð³Ð°Ñ…:**
```
info: GET /api/markers/0ace6a56-1dd3-45ad-b400-fed4399fdc8c from ::1
```

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** Ð‘Ð¾Ð»ÑŒÑˆÐµ 100 Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¿Ð¾Ð´Ñ€ÑÐ´

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹:**
- ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ð¿ÐµÑ€ÐµÑ€Ð¸ÑÐ¾Ð²Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Ñ†Ð¸ÐºÐ»Ðµ
- ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ useEffect
- ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸Ð¸
- ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ð´ÐµÐ»Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```typescript
// Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
const memoizedMarkers = useMemo(() => markers, [markers]);

// Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
const [isLoading, setIsLoading] = useState(false);
useEffect(() => {
  if (isLoading) return;
  setIsLoading(true);
  // Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...
  setIsLoading(false);
}, [markerId]);
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° 3: ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
**Ð’ÑÐµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ Ð´ÐµÐ»Ð°ÑŽÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº API Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ**

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- React Query Ð´Ð»Ñ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
- SWR Ð´Ð»Ñ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸
- Context API Ð´Ð»Ñ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ

---

## ðŸŽ¯ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### 1. Ð£Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñ‹
**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð:** Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Leaflet
- âœ… Ð£Ð¶Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ðµ
- âœ… Ð›ÐµÐ³ÐºÐ¾ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ
- âœ… Ð•ÑÑ‚ÑŒ Ð²ÑÐµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹

**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð‘:** Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ MapLibre GL
- âœ… Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°
- âœ… Ð›ÑƒÑ‡ÑˆÐ°Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ
- âš ï¸ ÐÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¾ÑÐ½Ð¾Ð²Ð½ÑƒÑŽ ÐºÐ°Ñ€Ñ‚Ñƒ

### 2. ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹
```typescript
// Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ React Query
import { useQuery } from '@tanstack/react-query';

const { data: marker } = useQuery({
  queryKey: ['marker', markerId],
  queryFn: () => getMarkerById(markerId),
  staleTime: 5 * 60 * 1000, // 5 Ð¼Ð¸Ð½ÑƒÑ‚ ÐºÑÑˆÐ°
});
```

### 3. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
```typescript
import React.memo from 'react';

const MiniMapMarker = React.memo(({ markerId }) => {
  // ... ÐºÐ¾Ð´
});
```

### 4. Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ñ†Ð¸ÐºÐ»Ñ‹
ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ:
- `MiniMapMarker.tsx`
- `MiniMapRoute.tsx`
- ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ Ñ useEffect Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÐ¼Ð¸

---

## ðŸ“Š Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÐºÐ°Ñ€Ñ‚

```
Ð“ÐµÐ¾Ð‘Ð»Ð¾Ð³.Ñ€Ñ„
â”œâ”€â”€ ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° (Leaflet)
â”‚   â”œâ”€â”€ /map
â”‚   â”œâ”€â”€ /planner
â”‚   â””â”€â”€ ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚: Map.tsx
â”‚
â”œâ”€â”€ ÐšÐ°Ñ€Ñ‚Ñ‹ Ð´Ð»Ñ Ð¿Ð¾ÑÑ‚Ð¾Ð² (MapLibre GL)
â”‚   â”œâ”€â”€ ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ Ð¿Ð¾ÑÑ‚Ð¾Ð²
â”‚   â”œâ”€â”€ ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð¿Ð¾ÑÑ‚Ð¾Ð²
â”‚   â”œâ”€â”€ ÐœÐ¸Ð½Ð¸-ÐºÐ°Ñ€Ñ‚Ñ‹
â”‚   â””â”€â”€ ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:
â”‚       â”œâ”€â”€ MapLibreMap.tsx
â”‚       â”œâ”€â”€ MiniMapMarker.tsx
â”‚       â”œâ”€â”€ MiniMapRoute.tsx
â”‚       â””â”€â”€ MiniEventCard.tsx
â”‚
â””â”€â”€ ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
    â”œâ”€â”€ Ð”Ð²Ðµ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ
    â”œâ”€â”€ Ð‘ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ âŒ ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾
    â””â”€â”€ ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ âš ï¸ Ð’Ð°Ð¶Ð½Ð¾
```

---

## ðŸ”§ Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

### 1. Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð² MiniMapMarker.tsx
```typescript
// Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
const [isLoading, setIsLoading] = useState(false);
const [markerData, setMarkerData] = useState(null);

useEffect(() => {
  if (!markerId || isLoading) return;
  
  setIsLoading(true);
  getMarkerById(markerId)
    .then(data => setMarkerData(data))
    .finally(() => setIsLoading(false));
}, [markerId]); // Ð¢Ð¾Ð»ÑŒÐºÐ¾ markerId Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÑ…
```

### 2. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
```typescript
import React.memo from 'react';

export default React.memo(MiniMapMarker);
```

### 3. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ React Query
```typescript
import { useQuery } from '@tanstack/react-query';

const { data: marker, isLoading } = useQuery({
  queryKey: ['marker', markerId],
  queryFn: () => getMarkerById(markerId),
});
```

