# üîç –ê–ù–ê–õ–ò–ó –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø –ö–û–ú–ê–ù–î –û–¢–ö–†–´–¢–ò–Ø –°–ê–ô–î–ë–ê–†–ê –ò –ü–ê–ù–ï–õ–ï–ô

## üìã –û–ë–ó–û–†

–í –ø—Ä–æ–µ–∫—Ç–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç, –≥–¥–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π –∏ —Å–∞–π–¥–±–∞—Ä–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.

---

## üö® –ù–ê–ô–î–ï–ù–ù–´–ï –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø

### 1. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –û–¢–ö–†–´–¢–ò–Ø –ü–û–°–¢–û–í (`setRightContent('posts')`)**

#### –ú–µ—Å—Ç–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **`frontend/src/contexts/LayoutContext.tsx:64`**
   ```typescript
   const [rightContent, setRightContent] = useState<ContentId>('posts'); // –í–°–ï–ì–î–ê –ø–æ—Å—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   ```
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

2. **`frontend/src/components/Sidebar.tsx:111`**
   ```typescript
   useEffect(() => {
     if ((location.pathname === '/' || location.pathname === '/posts') && rightContent !== 'posts') {
       setRightContent('posts');
     }
   }, [location.pathname, rightContent, setRightContent]);
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

3. **`frontend/src/components/Sidebar.tsx:193`**
   ```typescript
   if (!rightContent) {
     setRightContent('posts');
   }
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏

4. **`frontend/src/layouts/MainLayout.tsx:65`**
   ```typescript
   if (!rightContent) {
     layoutContext?.setRightContent('posts');
   }
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ leftContent

5. **`frontend/src/layouts/MainLayout.tsx:80`**
   ```typescript
   if (!isSoloPage && !rightContent) {
     layoutContext?.setRightContent('posts');
   }
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å solo-—Å—Ç—Ä–∞–Ω–∏—Ü—ã

6. **`frontend/src/layouts/MainLayout.tsx:160`**
   ```typescript
   useEffect(() => {
     if (isMainPage && rightContent !== 'posts') {
       layoutContext?.setRightContent('posts');
     }
   }, [isMainPage, rightContent, layoutContext]);
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–±–µ–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –ø–æ—Å—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

7. **`frontend/src/pages/Map.tsx:634`**
   ```typescript
   setRightContent?.('posts');
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –∏–∑ –∫–∞—Ä—Ç—ã

#### –ü—Ä–æ–±–ª–µ–º–∞:
–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –ø—ã—Ç–∞—é—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `rightContent='posts'`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫:
- –õ–∏—à–Ω–∏–º –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ—Ä—è–¥–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

### 2. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –û–¢–ö–†–´–¢–ò–Ø –õ–ï–í–û–ô –ü–ê–ù–ï–õ–ò (`setLeftContent`)**

#### –ú–µ—Å—Ç–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **`frontend/src/components/Sidebar.tsx:188`**
   ```typescript
   setLeftContent(item.id);
   ```
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —á–µ—Ä–µ–∑ —Å–∞–π–¥–±–∞—Ä

2. **`frontend/src/layouts/MainLayout.tsx:62`**
   ```typescript
   useEffect(() => {
     const expectedLeftContent = pathToContent[location.pathname];
     if (expectedLeftContent && leftContent !== expectedLeftContent) {
       layoutContext?.setLeftContent(expectedLeftContent);
     }
   }, [location.pathname, ...]);
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å pathname
   - **–ö–æ–Ω—Ñ–ª–∏–∫—Ç**: –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –ª–æ–≥–∏–∫–æ–π Sidebar

3. **`frontend/src/pages/Map.tsx:549`**
   ```typescript
   try { (setLeftContent as any)?.('planner'); } catch {}
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏–∑ –∫–∞—Ä—Ç—ã

4. **`frontend/src/pages/Map.tsx:633`**
   ```typescript
   setLeftContent?.('map');
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç—ã –∏–∑ —Å–∞–º–æ–π –∫–∞—Ä—Ç—ã

5. **`frontend/src/components/FavoritesPanel.tsx:873`**
   ```typescript
   try { (layoutContext as any)?.setLeftContent?.('planner'); } catch {}
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

#### –ü—Ä–æ–±–ª–µ–º–∞:
–õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:
- Sidebar —É–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ –∫–ª–∏–∫–∏
- MainLayout —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å URL
- Map –∏ FavoritesPanel –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é

–≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫:
- –î–≤–æ–π–Ω–æ–º—É –æ—Ç–∫—Ä—ã—Ç–∏—é –ø–∞–Ω–µ–ª–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –º–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π URL –∏ –ø—Ä—è–º—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

### 3. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –û–¢–ö–†–´–¢–ò–Ø –ü–†–û–§–ò–õ–Ø (`setRightContent('profile')`)**

#### –ú–µ—Å—Ç–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **`frontend/src/components/Sidebar.tsx:119`**
   ```typescript
   useEffect(() => {
     const params = new URLSearchParams(location.search);
     if (params.get('profile') === '1') {
       setRightContent('profile');
     }
   }, [location.search, setRightContent]);
   ```
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: –û—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä

2. **`frontend/src/components/Sidebar.tsx:224`**
   ```typescript
   if (item.type === 'right') {
     setRightContent(item.id);
     // ...
     if (item.id === 'profile') {
       return;
     }
   }
   ```
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: –û—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∏–∫ –≤ —Å–∞–π–¥–±–∞—Ä–µ

3. **`frontend/src/components/Sidebar.tsx:364`**
   ```typescript
   onClick={() => {
     navigate('/?profile=1');
   }}
   ```
   - ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º (–∫–Ω–æ–ø–∫–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏)

#### –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–æ—Ñ–∏–ª—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
- –ß–µ—Ä–µ–∑ –∫–ª–∏–∫ –≤ —Å–∞–π–¥–±–∞—Ä–µ (–ø—Ä—è–º–æ–µ `setRightContent`)
- –ß–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä (–∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç `setRightContent`)

–≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –¥–≤–æ–π–Ω–æ–º—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—é.

---

### 4. **–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –û–¢–ö–†–´–¢–ò–Ø –ß–ê–¢–ê (`setRightContent('chat')`)**

#### –ú–µ—Å—Ç–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **`frontend/src/components/Map/MarkerPopup.tsx:204`**
   ```typescript
   if (setRightContent) {
     setRightContent('chat');
   }
   if (navigate) navigate(`/chat?room=${existingRooms[0].id}`);
   ```

2. **`frontend/src/components/Map/MarkerPopup.tsx:234`**
   ```typescript
   if (setRightContent) {
     setRightContent('chat');
   }
   if (navigate) navigate(`/chat?room=${result.id}`);
   ```

#### –ü—Ä–æ–±–ª–µ–º–∞:
–ß–∞—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ MarkerPopup, –º–∏–Ω—É—è —Å–∞–π–¥–±–∞—Ä. –≠—Ç–æ –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –ª–æ–≥–∏–∫–æ–π —Å–∞–π–¥–±–∞—Ä–∞.

---

## üéØ –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1. **–î–í–ê –†–ê–ó–ù–´–• –°–ê–ô–î–ë–ê–†–ê**

–í –ø—Ä–æ–µ–∫—Ç–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–∞–π–¥–±–∞—Ä–∞:

1. **`frontend/src/components/Sidebar.tsx`**
   - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π–¥–±–∞—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ –ø–∞–Ω–µ–ª—è–º–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `LayoutContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

2. **`frontend/src/components/ui/sidebar.tsx`**
   - UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (shadcn/ui)
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∞–π–¥–±–∞—Ä–∞
   - –ò–º–µ–µ—Ç —Å–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç `SidebarContext`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç cookie –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ò–º–µ–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ `Ctrl+B` / `Cmd+B`

**–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–∏ –¥–≤–∞ —Å–∞–π–¥–±–∞—Ä–∞ –Ω–µ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å.

---

### 2. **–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø URL –ò –°–û–°–¢–û–Ø–ù–ò–Ø**

#### MainLayout —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç `leftContent` —Å `pathname`:

```typescript
useEffect(() => {
  const pathToContent: Record<string, ContentId> = {
    '/map': 'map',
    '/planner': 'planner',
    '/calendar': 'calendar'
  };
  
  const expectedLeftContent = pathToContent[location.pathname];
  if (expectedLeftContent && leftContent !== expectedLeftContent) {
    layoutContext?.setLeftContent(expectedLeftContent);
  }
}, [location.pathname, ...]);
```

#### Sidebar —Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `leftContent` –ø—Ä–∏ –∫–ª–∏–∫–µ:

```typescript
if (item.type === 'left') {
  setLeftContent(item.id);
  navigate(leftRoute);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–∞ –º–µ—Å—Ç–∞ –ø—ã—Ç–∞—é—Ç—Å—è —É–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
- Sidebar —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–∞–≤–∏–≥–∏—Ä—É–µ—Ç
- MainLayout –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL –∏ —Å–Ω–æ–≤–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –¥–≤–æ–π–Ω–æ–º—É —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—é.

---

### 3. **–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï –ú–ï–°–¢–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –ü–û–°–¢–û–í**

–ü–æ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Sidebar)
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –±–µ–∑ –ø—Ä–∞–≤–æ–π (Sidebar)
- –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ leftContent (MainLayout)
- –ü—Ä–∏ —É—Ö–æ–¥–µ —Å solo-—Å—Ç—Ä–∞–Ω–∏—Ü—ã (MainLayout)
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (MainLayout useEffect)
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –∏–∑ –∫–∞—Ä—Ç—ã (Map)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å.

---

### 4. **–ü–†–Ø–ú–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–ê–ù–ï–õ–Ø–ú–ò –ò–ó –ö–û–ú–ü–û–ù–ï–ù–¢–û–í**

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞–ø—Ä—è–º—É—é —É–ø—Ä–∞–≤–ª—è—é—Ç –ø–∞–Ω–µ–ª—è–º–∏, –º–∏–Ω—É—è —Å–∞–π–¥–±–∞—Ä:

- **Map.tsx**: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `map` –∏ `planner` –Ω–∞–ø—Ä—è–º—É—é
- **FavoritesPanel.tsx**: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `planner` –Ω–∞–ø—Ä—è–º—É—é
- **MarkerPopup.tsx**: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `chat` –Ω–∞–ø—Ä—è–º—É—é

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ä—É—à–µ–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### 1. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Å—Ç–æ–≤**

–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ `LayoutContext`:

```typescript
const ensurePostsOpen = useCallback(() => {
  if (!rightContent) {
    setRightContent('posts');
  }
}, [rightContent]);
```

–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤–µ–∑–¥–µ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ `setRightContent('posts')`.

---

### 2. **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL**

–í—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –ø–æ–¥—Ö–æ–¥:
- **–í–∞—Ä–∏–∞–Ω—Ç A**: Sidebar —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, MainLayout —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç
- **–í–∞—Ä–∏–∞–Ω—Ç B**: MainLayout —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç, Sidebar —Ç–æ–ª—å–∫–æ –Ω–∞–≤–∏–≥–∏—Ä—É–µ—Ç

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **–í–∞—Ä–∏–∞–Ω—Ç A** - Sidebar –∫–∞–∫ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

---

### 3. **–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π API –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π**

–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏-—Ö–µ–ª–ø–µ—Ä—ã –≤ `LayoutContext`:

```typescript
const openLeftPanel = (id: ContentId) => {
  setLeftContent(id);
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  if (!rightContent) {
    setRightContent('posts');
  }
};

const openRightPanel = (id: ContentId) => {
  setRightContent(id);
};
```

–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤–µ–∑–¥–µ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ `setLeftContent`/`setRightContent`.

---

### 4. **–£–±—Ä–∞—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

–í–º–µ—Å—Ç–æ:
```typescript
setLeftContent?.('planner');
navigate('/planner');
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```typescript
navigate('/planner'); // MainLayout —Å–∞–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç
```

–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ö–µ–ª–ø–µ—Ä:
```typescript
const openPlanner = () => {
  layoutContext.openLeftPanel('planner');
  navigate('/planner');
};
```

---

### 5. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**

–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É URL-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –∏ –ø—Ä—è–º—ã–º –≤—ã–∑–æ–≤–æ–º:

```typescript
const openProfile = () => {
  if (location.pathname === '/' || location.pathname === '/posts') {
    // –ï—Å–ª–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π - –∏—Å–ø–æ–ª—å–∑—É–µ–º URL –ø–∞—Ä–∞–º–µ—Ç—Ä
    navigate('/?profile=1');
  } else {
    // –ò–Ω–∞—á–µ - –ø—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
    setRightContent('profile');
  }
};
```

---

### 6. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

–°–æ–∑–¥–∞—Ç—å —á–µ—Ç–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
- Sidebar - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–Ω–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ UI
- MainLayout - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç URL —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
- LayoutContext - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ô

- **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Å—Ç–æ–≤**: 7 –º–µ—Å—Ç
- **–û—Ç–∫—Ä—ã—Ç–∏–µ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏**: 5 –º–µ—Å—Ç
- **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**: 3 –º–µ—Å—Ç–∞
- **–û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞**: 2 –º–µ—Å—Ç–∞
- **–í—Å–µ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–π**: 17 –º–µ—Å—Ç

---

## ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**:
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL (MainLayout vs Sidebar)
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Å—Ç–æ–≤

2. **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**:
   - –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π API –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–µ–π
   - –£–±—Ä–∞—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –∏–∑ Map, FavoritesPanel, MarkerPopup

3. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**:
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-01-27  
**–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª**: AI Assistant

