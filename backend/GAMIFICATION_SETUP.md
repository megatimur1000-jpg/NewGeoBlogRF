# üéÆ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
error: –æ—Ç–Ω–æ—à–µ–Ω–∏–µ "user_levels" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–∏—Å—Ç–µ–º—ã –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Node.js —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd backend
node src/migrations/create_gamification_tables.js
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ psql –Ω–∞–ø—Ä—è–º—É—é

```bash
psql -U your_user -d your_database -f create_gamification_tables.sql
```

### –°–ø–æ—Å–æ–± 3: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç PostgreSQL

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –∫–ª–∏–µ–Ω—Ç PostgreSQL (pgAdmin, DBeaver, –∏–ª–∏ psql)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `backend/create_gamification_tables.sql`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–µ—Å—å SQL —Å–∫—Ä–∏–ø—Ç

## üìã –°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

1. **user_levels** - –£—Ä–æ–≤–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `total_xp` - –û–±—â–∏–π –æ–ø—ã—Ç
   - `current_level` - –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
   - `current_level_xp` - –û–ø—ã—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º —É—Ä–æ–≤–Ω–µ
   - `required_xp` - –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π –æ–ø—ã—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
   - `rank` - –†–∞–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (novice, explorer, traveler, legend, geoblogger)

2. **xp_history** - –ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ–ø—ã—Ç–∞
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ XP
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫

3. **daily_goals** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ü–µ–ª–∏
   - –¶–µ–ª–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

4. **daily_goals_history** - –ò—Å—Ç–æ—Ä–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π
   - –°—Ç—Ä–∏–∫ (—Å–µ—Ä–∏—è –¥–Ω–µ–π)
   - –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–µ–ª–µ–π

5. **user_achievements** - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º

6. **gamification_actions** - –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫
   - –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_name IN (
    'user_levels',
    'xp_history',
    'daily_goals',
    'daily_goals_history',
    'user_achievements',
    'gamification_actions'
  );
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è 6 —Å—Ç—Ä–æ–∫.

## üöÄ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä:
   ```bash
   cd backend
   npm start
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∏ –∏—Å—á–µ–∑–ª–∏ –≤ –ª–æ–≥–∞—Ö

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API:
   ```bash
   # –ü–æ–ª—É—á–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   curl -H "Authorization: Bearer YOUR_TOKEN" \
        http://localhost:3002/api/gamification/level
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CREATE TABLE IF NOT EXISTS`, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `users`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç UUID –¥–ª—è ID (–µ—Å–ª–∏ –≤–∞—à–∞ —Ç–∞–±–ª–∏—Ü–∞ `users` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π —Ç–∏–ø, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "—Ç–∞–±–ª–∏—Ü–∞ users –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `users` –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ –≤–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î.

### –û—à–∏–±–∫–∞: "—Ç–∏–ø UUID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
PostgreSQL –≤–µ—Ä—Å–∏–∏ 13+ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç UUID. –î–ª—è –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gen_random_uuid()` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
```sql
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```

### –û—à–∏–±–∫–∞: "permission denied"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:
```sql
GRANT ALL PRIVILEGES ON DATABASE your_database TO your_user;
```

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 2025-01-08*

