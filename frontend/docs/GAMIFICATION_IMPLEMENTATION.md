# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –ó–ê–í–ï–†–®–ï–ù–û

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** (`types/gamification.ts`)
  - XPParams, XPResult, UserLevel, DailyGoal, Achievement
  - –ò—Å–∫–ª—é—á–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∏ –±–ª–æ–≥–∏
  
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è XP** (`config/xpSources.ts`)
  - –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ XP (–ë–ï–ó –º–∞—Ä—à—Ä—É—Ç–æ–≤)
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏, –∫—É–ª–µ—Ä–¥–∞—É–Ω–æ–≤, –ª–∏–º–∏—Ç–æ–≤
  
- **–£—Ç–∏–ª–∏—Ç—ã —Ä–∞—Å—á—ë—Ç–æ–≤** (`utils/xpCalculator.ts`)
  - –†–∞—Å—á—ë—Ç —É—Ä–æ–≤–Ω–µ–π, –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, —Ä–∞–Ω–≥–æ–≤
  - –§–æ—Ä–º—É–ª–∞: `XP = 100 * —É—Ä–æ–≤–µ–Ω—å^1.5`

### 2. –§–∞—Å–∞–¥ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚úÖ
- **GamificationFacade** (`services/gamificationFacade.ts`)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  - –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫ (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π)
  - –õ–∏–º–∏—Ç—ã –∏ –∫—É–ª–µ—Ä–¥–∞—É–Ω—ã
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend API

### 3. React Context ‚úÖ
- **GamificationContext** (`contexts/GamificationContext.tsx`)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
  - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  - –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å XP –∏ —Ü–µ–ª—è–º–∏
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `App.tsx`

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI ‚úÖ
- **LevelCard** (`components/Gamification/LevelCard.tsx`)
  - –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `ProgressRating.tsx`
  
- **DailyGoalsWidget** (`components/Gamification/DailyGoalsWidget.tsx`)
  - –í–∏–¥–∂–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `ProgressRating.tsx`
  
- **XPNotification** (`components/Gamification/XPNotification.tsx`)
  - –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ XP
  
- **LevelUpAnimation** (`components/Gamification/LevelUpAnimation.tsx`)
  - –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è

### 5. –•—É–∫–∏ ‚úÖ
- **useLevelProgress** (`hooks/useLevelProgress.ts`)
  - –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º —É—Ä–æ–≤–Ω—è
  
- **useDailyGoals** (`hooks/useDailyGoals.ts`)
  - –†–∞–±–æ—Ç–∞ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ —Ü–µ–ª—è–º–∏

### 6. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ü–µ–ª–µ–π ‚úÖ
- **dailyGoalGenerator** (`utils/dailyGoalGenerator.ts`)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ ‚úÖ
- **PostsService** (`services/postsService.ts`)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞
  - –ë–æ–Ω—É—Å—ã –∑–∞ —Ñ–æ—Ç–æ –∏ –º–µ—Ç–∫–∏
  
- **MarkerService** (`services/markerService.ts`)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ç–∫–∏
  - –ë–æ–Ω—É—Å—ã –∑–∞ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
  - –ë–æ–Ω—É—Å—ã –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ
  
- **gamificationHelper** (`utils/gamificationHelper.ts`)
  - –•–µ–ª–ø–µ—Ä-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

### 8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚úÖ
- –£–¥–∞–ª–µ–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –º–∞—Ä—à—Ä—É—Ç—ã
- –£–¥–∞–ª–µ–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –±–ª–æ–≥–∏
- –£–¥–∞–ª–µ–Ω—ã —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üìä –ò—Å—Ç–æ—á–Ω–∏–∫–∏ XP (–∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫)

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞: **50 XP**
- –ü–æ—Å—Ç —Å —Ñ–æ—Ç–æ: **+25 XP**
- –ü–æ—Å—Ç —Å –º–µ—Ç–∫–æ–π: **+30 XP**

### –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏: **30 XP**
- –ú–µ—Ç–∫–∞ —Å —Ñ–æ—Ç–æ: **+20 XP**
- –ú–µ—Ç–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º: **+15 XP**

### –ö–∞—á–µ—Å—Ç–≤–æ
- –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (>80%): **+10 XP**
- –ò–¥–µ–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (>90%): **+30 XP**
- –û–¥–æ–±—Ä–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π: **+20 XP**

### –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏: **30-75 XP**
- –í—Å–µ —Ü–µ–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã: **+50% –±–æ–Ω—É—Å**
- –°—Ç—Ä–∏–∫ 7 –¥–Ω–µ–π: **+25% –º–Ω–æ–∂–∏—Ç–µ–ª—å**
- –°—Ç—Ä–∏–∫ 30 –¥–Ω–µ–π: **+50% –º–Ω–æ–∂–∏—Ç–µ–ª—å**

### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –û–±—ã—á–Ω–æ–µ: **50 XP**
- –†–µ–¥–∫–æ–µ: **150 XP**
- –≠–ø–∏—á–µ—Å–∫–æ–µ: **300 XP**
- –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ: **500 XP**

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### App.tsx
```tsx
<GamificationProvider>
  {/* –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ */}
</GamificationProvider>
```

### ProgressRating.tsx
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `LevelCard` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `DailyGoalsWidget` –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### PostsService
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç XP –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–æ—Ç–æ –∏ –º–µ—Ç–∫–∏

### MarkerService
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç XP –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ç–∫–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫

‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏** - XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏** - –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ = –æ–¥–∏–Ω XP
‚úÖ **–õ–∏–º–∏—Ç—ã** - –º–∞–∫—Å–∏–º—É–º –¥–µ–π—Å—Ç–≤–∏–π –≤ –¥–µ–Ω—å
‚úÖ **–ö—É–ª–µ—Ä–¥–∞—É–Ω—ã** - –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
‚úÖ **–ú–∞—Ä—à—Ä—É—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω—ã** - –Ω–µ—Ç XP –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

## üìã –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### Backend API (TODO)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è XP (`/api/gamification/xp`)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —É—Ä–æ–≤–Ω–µ–π (`/api/gamification/level/:userId`)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ü–µ–ª–µ–π (`/api/gamification/daily-goals`)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (`/api/gamification/achievements`)
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (`/api/gamification/stats`)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (XPNotification –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ)
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è (LevelUpAnimation –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ)
- [ ] –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Leaderboard)
- [ ] –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Å–µ–∑–æ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–î–æ–±–∞–≤–∏—Ç—å XP –≤—Ä—É—á–Ω—É—é:**
```typescript
import { useGamification } from '../contexts/GamificationContext';

const { addXP } = useGamification();
await addXP({
  userId: user.id,
  source: 'post_created',
  amount: 50,
  contentId: post.id,
  contentType: 'post',
});
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–µ–ª–ø–µ—Ä:**
```typescript
import { addXPForPost } from '../utils/gamificationHelper';

await addXPForPost(post.id, {
  hasPhoto: true,
  hasMarker: true,
  userId: user.id,
});
```

3. **–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å:**
```tsx
import LevelCard from '../components/Gamification/LevelCard';

<LevelCard />
```

4. **–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ü–µ–ª–∏:**
```tsx
import DailyGoalsWidget from '../components/Gamification/DailyGoalsWidget';

<DailyGoalsWidget />
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `GamificationFacade`
- –§–∞—Å–∞–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º XP
- –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç—å Backend API –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.


