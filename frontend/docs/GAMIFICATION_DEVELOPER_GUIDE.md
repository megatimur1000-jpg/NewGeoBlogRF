# üéÆ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –±—É—Å—Ç—ã –∏ —Ä–∞–∑–¥–µ–ª—ã**

---

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
3. [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ-xp)
4. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ XP](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤-xp)
5. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –±—É—Å—Ç–æ–≤](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-–±—É—Å—Ç–æ–≤)
6. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π)
7. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-–µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö-—Ü–µ–ª–µ–π)
8. [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–Ω–≥–æ–≤](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-—Ä–∞–Ω–≥–æ–≤)
9. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–≤-–Ω–æ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
10. [Backend API](#backend-api)
11. [–û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–æ—Ç–ª–∞–¥–∫–∞-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
    ‚Üì
PostsService/MarkerService
    ‚Üì
gamificationHelper (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚Üì
gamificationFacade (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏, –º–æ–¥–µ—Ä–∞—Ü–∏—è)
    ‚Üì
Backend API (/api/gamification/xp)
    ‚Üì
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (user_levels, xp_history)
    ‚Üì
GamificationContext (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI)
    ‚Üì
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (LevelCard, DailyGoalsWidget)
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **GamificationFacade** - –≥–ª–∞–≤–Ω—ã–π —Ñ–∞—Å–∞–¥, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å, –º–æ–¥–µ—Ä–∞—Ü–∏—é, –ª–∏–º–∏—Ç—ã
2. **GamificationContext** - React Context –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
3. **gamificationHelper** - —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP
4. **Backend API** - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
5. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è, —Ü–µ–ª–µ–π, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Frontend

```
frontend/src/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ gamification.ts              # –í—Å–µ —Ç–∏–ø—ã –¥–ª—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ xpSources.ts                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ XP
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ gamificationFacade.ts        # –§–∞—Å–∞–¥ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≥–ª–∞–≤–Ω—ã–π!)
‚îÇ
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ GamificationContext.tsx      # React Context
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useLevelProgress.ts          # –•—É–∫ –¥–ª—è —É—Ä–æ–≤–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ useDailyGoals.ts             # –•—É–∫ –¥–ª—è —Ü–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ useAchievements.ts           # –•—É–∫ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ components/Gamification/
‚îÇ   ‚îú‚îÄ‚îÄ LevelCard.tsx                 # –ö–∞—Ä—Ç–æ—á–∫–∞ —É—Ä–æ–≤–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ DailyGoalsWidget.tsx         # –í–∏–¥–∂–µ—Ç —Ü–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ XPNotification.tsx           # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è XP
‚îÇ   ‚îî‚îÄ‚îÄ LevelUpAnimation.tsx         # –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ xpCalculator.ts              # –†–∞—Å—á—ë—Ç—ã XP –∏ —É—Ä–æ–≤–Ω–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ dailyGoalGenerator.ts        # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ü–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ gamificationHelper.ts        # –•–µ–ª–ø–µ—Ä—ã –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP
‚îÇ
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ postsService.ts               # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ markerService.ts              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

### Backend

```
backend/
‚îú‚îÄ‚îÄ create_gamification_tables.sql    # SQL —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gamificationRoutes.js     # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gamificationController.js # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ xpCalculator.js          # –†–∞—Å—á—ë—Ç—ã (Backend –≤–µ—Ä—Å–∏—è)
```

---

## üí∞ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –ø–æ—Å—Ç –∏–ª–∏ –º–µ—Ç–∫—É, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:

```typescript
// –í postsService.ts –∏–ª–∏ markerService.ts
import('../utils/gamificationHelper').then(({ addXPForPost }) => {
  addXPForPost(post.id, {
    hasPhoto: true,
    hasMarker: true,
    userId: user.id,
  });
});
```

### –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

1. **gamificationHelper** –≤—ã–∑—ã–≤–∞–µ—Ç `gamificationFacade.addXP()`
2. **GamificationFacade** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è (–Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ª–∏)
   - ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—é (–æ–¥–æ–±—Ä–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç)
   - ‚úÖ –õ–∏–º–∏—Ç—ã (–Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏ –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç)
   - ‚úÖ –ö—É–ª–µ—Ä–¥–∞—É–Ω (–ø—Ä–æ—à–ª–æ –ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏)
3. –ï—Å–ª–∏ –≤—Å—ë –û–ö ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ Backend API
4. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç UI —á–µ—Ä–µ–∑ GamificationContext

### –ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –ø–æ—Å—Ç —Å —Ñ–æ—Ç–æ
    ‚Üì
postsService.createPost() ‚Üí post.id = "123"
    ‚Üì
gamificationHelper.addXPForPost("123", { hasPhoto: true })
    ‚Üì
gamificationFacade.addXP({ source: 'post_created', amount: 50 })
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Üí OK
    ‚Üì
POST /api/gamification/xp
    ‚Üì
Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î
    ‚Üì
GamificationContext –æ–±–Ω–æ–≤–ª—è–µ—Ç userLevel
    ‚Üì
LevelCard –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º XP
```

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ XP

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/config/xpSources.ts`:

```typescript
export const XP_SOURCES: Record<XPSource, XPSourceConfig> = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  
  // –ù–û–í–´–ô –ò–°–¢–û–ß–ù–ò–ö
  new_action: {
    id: 'new_action',
    name: '–ù–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ',
    description: '–ó–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è',
    baseAmount: 100,                    // –ë–∞–∑–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ XP
    category: 'content',                // 'content' | 'quality' | 'activity' | 'achievement'
    requiresModeration: true,           // –¢—Ä–µ–±—É–µ—Ç –ª–∏ –º–æ–¥–µ—Ä–∞—Ü–∏—é
    cooldown: 60,                      // –ö—É–ª–µ—Ä–¥–∞—É–Ω –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    dailyLimit: 10,                     // –ú–∞–∫—Å–∏–º—É–º —Ä–∞–∑ –≤ –¥–µ–Ω—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  },
};
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/types/gamification.ts`:

```typescript
export type XPSource = 
  | 'post_created'
  | 'marker_created'
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  | 'new_action';  // ‚Üê –î–û–ë–ê–í–ò–¢–¨ –°–Æ–î–ê
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å —Ö–µ–ª–ø–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/utils/gamificationHelper.ts`:

```typescript
/**
 * –î–æ–±–∞–≤–∏—Ç—å XP –∑–∞ –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
 */
export async function addXPForNewAction(actionId: string, options: {
  userId: string;
  // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
}): Promise<void> {
  try {
    if (!options.userId) {
      console.warn('GamificationHelper: userId –Ω–µ —É–∫–∞–∑–∞–Ω');
      return;
    }

    await gamificationFacade.addXP({
      userId: options.userId,
      source: 'new_action',
      amount: 100,
      contentId: actionId,
      contentType: 'action', // –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–∏–ø
      metadata: {
        // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      },
    });
  } catch (error) {
    console.error('GamificationHelper.addXPForNewAction error:', error);
  }
}
```

### –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å

–í –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `newService.ts`):

```typescript
import { addXPForNewAction } from '../utils/gamificationHelper';

export const createNewAction = async (data: any) => {
  const response = await apiClient.post('/new-actions', data);
  const action = response.data;
  
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
  if (action?.id) {
    import('../utils/gamificationHelper').then(({ addXPForNewAction }) => {
      const token = localStorage.getItem('token');
      let userId = action.user_id || undefined;
      
      if (!userId && token) {
        try {
          const payload = JSON.parse(atob(token.split('.')[1]));
          userId = payload.userId || payload.id || undefined;
        } catch (e) {}
      }
      
      if (userId) {
        addXPForNewAction(action.id, { userId }).catch(err => 
          console.error('Gamification error:', err)
        );
      }
    });
  }
  
  return action;
};
```

---

## üöÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –±—É—Å—Ç–æ–≤

### –ß—Ç–æ —Ç–∞–∫–æ–µ –±—É—Å—Ç?

–ë—É—Å—Ç - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π XP –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π. –ù–∞–ø—Ä–∏–º–µ—Ä:
- –ü–æ—Å—Ç —Å —Ñ–æ—Ç–æ: +25 XP
- –ú–µ—Ç–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º: +15 XP
- –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ: +10 XP

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –±—É—Å—Ç

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ö–µ–ª–ø–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/utils/gamificationHelper.ts`:

```typescript
export async function addXPForPost(postId: string, options: {
  hasPhoto?: boolean;
  hasMarker?: boolean;
  hasVideo?: boolean;  // ‚Üê –ù–û–í–´–ô –ü–ê–†–ê–ú–ï–¢–†
  userId?: string;
}): Promise<void> {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
  
  // –ù–û–í–´–ô –ë–£–°–¢
  if (options.hasVideo) {
    await gamificationFacade.addXP({
      userId: options.userId!,
      source: 'post_with_video',
      amount: 40,  // –ë—É—Å—Ç –∑–∞ –≤–∏–¥–µ–æ
      contentId: postId,
      contentType: 'post',
      metadata: {
        hasVideo: true,
      },
    });
  }
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ XP

1. –î–æ–±–∞–≤–∏—Ç—å –≤ `xpSources.ts`:
```typescript
post_with_video: {
  id: 'post_with_video',
  name: '–ü–æ—Å—Ç —Å –≤–∏–¥–µ–æ',
  description: '–ë–æ–Ω—É—Å –∑–∞ –ø–æ—Å—Ç —Å –≤–∏–¥–µ–æ',
  baseAmount: 40,
  category: 'content',
  requiresModeration: true,
},
```

2. –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –≤ `gamification.ts`:
```typescript
export type XPSource = 
  | 'post_created'
  | 'post_with_video'  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
  // ...
```

3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ö–µ–ª–ø–µ—Ä–µ (–∫–∞–∫ –≤ –≤–∞—Ä–∏–∞–Ω—Ç–µ 1)

---

## üèÜ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –≤ useAchievements

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/hooks/useAchievements.ts`:

```typescript
const ALL_ACHIEVEMENTS: Achievement[] = [
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  
  // –ù–û–í–û–ï –î–û–°–¢–ò–ñ–ï–ù–ò–ï
  {
    id: 'new_achievement',
    title: '–ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
    description: '–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
    icon: 'star',  // –ò–º—è –∏–∫–æ–Ω–∫–∏ –∏–∑ lucide-react
    category: 'posts',  // 'places' | 'posts' | 'quality' | 'activity' | 'special'
    rarity: 'rare',  // 'common' | 'rare' | 'epic' | 'legendary'
    progress: { current: 0, target: 10 },  // –ü—Ä–æ–≥—Ä–µ—Å—Å
    unlocked: false,
    xpReward: 150,  // XP –∑–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É
  },
];
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏

–í —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ, –≤ `useEffect` –≥–¥–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

```typescript
useEffect(() => {
  const updatedAchievements = ALL_ACHIEVEMENTS.map(achievement => {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
    
    // –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê
    if (achievement.id === 'new_achievement') {
      const progress = calculateNewAchievementProgress(); // –í–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è
      return {
        ...achievement,
        progress: { current: progress, target: 10 },
        unlocked: progress >= 10,
      };
    }
    
    return achievement;
  });
  
  setAchievements(updatedAchievements);
}, [dependencies]);
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –≤ Backend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î, –¥–æ–±–∞–≤—å—Ç–µ –≤ `backend/src/controllers/gamificationController.js`:

```javascript
// –í —Ñ—É–Ω–∫—Ü–∏–∏ getAchievements –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
const newAchievement = await pool.query(
  'SELECT * FROM user_achievements WHERE user_id = $1 AND achievement_id = $2',
  [userId, 'new_achievement']
);
```

---

## üìÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω —Ü–µ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/utils/dailyGoalGenerator.ts`:

```typescript
const GOAL_TEMPLATES: GoalTemplate[] = [
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã
  
  // –ù–û–í–´–ô –®–ê–ë–õ–û–ù
  {
    type: 'new_action',
    title: '–ù–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ',
    description: '–í—ã–ø–æ–ª–Ω–∏—Ç–µ {target} –Ω–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π',
    icon: 'üéØ',
    easy: { target: 1, xp: 30 },
    medium: { target: 3, xp: 50 },
    hard: { target: 5, xp: 75 },
  },
];
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø —Ü–µ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/types/gamification.ts`:

```typescript
export type GoalType = 
  | 'create_posts'
  | 'create_markers'
  | 'new_action'  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
  // ...
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

–í `frontend/src/utils/dailyGoalGenerator.ts`:

```typescript
export function updateGoalProgress(
  goals: DailyGoal[],
  type: GoalType,
  amount: number = 1
): DailyGoal[] {
  return goals.map(goal => {
    if (goal.type === type && !goal.completed) {
      // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞
    }
    
    // –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê
    if (goal.type === 'new_action' && !goal.completed) {
      const newCurrent = Math.min(goal.current + amount, goal.target);
      return {
        ...goal,
        current: newCurrent,
        completed: newCurrent >= goal.target,
      };
    }
    
    return goal;
  });
}
```

### –®–∞–≥ 4: –í—ã–∑—ã–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏

–í –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```typescript
import { useGamification } from '../contexts/GamificationContext';
import { updateGoalProgress } from '../utils/dailyGoalGenerator';

const { dailyGoals, setDailyGoals } = useGamification();

// –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏—è
const updatedGoals = updateGoalProgress(dailyGoals, 'new_action', 1);
setDailyGoals(updatedGoals);
```

---

## üëë –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–Ω–≥–æ–≤

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–Ω–≥ –≤ —Ç–∏–ø—ã

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/types/gamification.ts`:

```typescript
export type UserRank = 
  | 'novice' 
  | 'explorer' 
  | 'traveler' 
  | 'legend' 
  | 'geoblogger'
  | 'new_rank';  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–Ω–≥–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `frontend/src/utils/xpCalculator.ts`:

```typescript
export function getRankByLevel(level: number): UserRank {
  if (level >= 100) return 'new_rank';  // ‚Üê –ù–û–í–´–ô –†–ê–ù–ì
  if (level >= 50) return 'geoblogger';
  if (level >= 31) return 'legend';
  if (level >= 16) return 'traveler';
  if (level >= 6) return 'explorer';
  return 'novice';
}
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–Ω–≥–µ

–í —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ:

```typescript
export function getRankInfo(rank: UserRank): RankInfo {
  const ranks: Record<UserRank, RankInfo> = {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–Ω–≥–∏
    
    new_rank: {
      name: '–ù–æ–≤—ã–π —Ä–∞–Ω–≥',
      emoji: 'üåü',
      description: '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞–Ω–≥–∞',
      privileges: [
        '–í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ì–µ–æ–ë–ª–æ–≥–≥–µ—Ä–∞',
        '–ù–æ–≤–∞—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è 1',
        '–ù–æ–≤–∞—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è 2',
      ],
      levelRange: [100, Infinity],
    },
  };
  
  return ranks[rank];
}
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å Backend

–í `backend/src/utils/xpCalculator.js`:

```javascript
function calculateLevelFromTotalXP(totalXP) {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–Ω–≥
  let rank = 'novice';
  if (level >= 100) rank = 'new_rank';  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
  else if (level >= 50) rank = 'geoblogger';
  // ...
}
```

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è

```typescript
import { useGamification } from '../contexts/GamificationContext';
import LevelCard from '../components/Gamification/LevelCard';

function MyComponent() {
  const { userLevel, loading } = useGamification();
  
  return (
    <div>
      {loading ? '–ó–∞–≥—Ä—É–∑–∫–∞...' : <LevelCard />}
    </div>
  );
}
```

### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP

```typescript
import { useGamification } from '../contexts/GamificationContext';

function MyComponent() {
  const { addXP } = useGamification();
  
  const handleAction = async () => {
    // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
    const result = await doSomething();
    
    // –ù–∞—á–∏—Å–ª—è–µ–º XP
    await addXP({
      userId: user.id,
      source: 'my_action',
      amount: 50,
      contentId: result.id,
      contentType: 'action',
    });
  };
  
  return <button onClick={handleAction}>–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>;
}
```

---

## üîß Backend API

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `backend/src/routes/gamificationRoutes.js`:

- `GET /api/gamification/level/:userId?` - –ø–æ–ª—É—á–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
- `POST /api/gamification/xp` - –¥–æ–±–∞–≤–∏—Ç—å XP
- `GET /api/gamification/daily-goals` - –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–ª–∏
- `POST /api/gamification/goals/:goalId/complete` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ü–µ–ª—å
- `POST /api/gamification/daily-reward/claim` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É
- `GET /api/gamification/achievements` - –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `GET /api/gamification/stats` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

1. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ `backend/src/controllers/gamificationController.js`:

```javascript
export const myNewEndpoint = async (req, res) => {
  try {
    const userId = req.user?.id;
    // ... –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞
    res.json({ success: true, data: result });
  } catch (error) {
    console.error('myNewEndpoint error:', error);
    res.status(500).json({ error: 'Failed' });
  }
};
```

2. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç –≤ `backend/src/routes/gamificationRoutes.js`:

```javascript
router.get('/my-endpoint', myNewEndpoint);
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Å—Ç –∏–ª–∏ –º–µ—Ç–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - `GamificationHelper: ...` - —Ö–µ–ª–ø–µ—Ä –≤—ã–∑–≤–∞–Ω
   - `GamificationFacade.addXP: ...` - —Ñ–∞—Å–∞–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   - `POST /api/gamification/xp` - –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è

```typescript
import { useGamification } from '../contexts/GamificationContext';

function DebugComponent() {
  const { userLevel, loading } = useGamification();
  
  console.log('User Level:', userLevel);
  console.log('Loading:', loading);
  
  return <div>Level: {userLevel?.level}</div>;
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–µ–π

```typescript
import { useDailyGoals } from '../hooks/useDailyGoals';

function DebugGoals() {
  const { dailyGoals, progress, allCompleted } = useDailyGoals();
  
  console.log('Goals:', dailyGoals);
  console.log('Progress:', progress);
  console.log('All Completed:', allCompleted);
  
  return <div>Goals: {dailyGoals.length}</div>;
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:3002/api/gamification/level/USER_ID

# –î–æ–±–∞–≤–∏—Ç—å XP
curl -X POST \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"source":"post_created","amount":50,"contentId":"123"}' \
  http://localhost:3002/api/gamification/xp
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gamificationFacade`** - –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–æ–¥–µ—Ä–∞—Ü–∏—é** - XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∏–º–∏—Ç—ã** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `dailyLimit` –≤ `xpSources.ts`
4. **–ú–∞—Ä—à—Ä—É—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω—ã** - –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ XP –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫
2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `import()` –¥–ª—è —Ö–µ–ª–ø–µ—Ä–æ–≤
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ Context

### –û—à–∏–±–∫–∏

1. **–ù–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - –µ—Å–ª–∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å
2. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `console.error` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `try/catch`

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –≤ `types/gamification.ts`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config/xpSources.ts` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ö–µ–ª–ø–µ—Ä –≤ `utils/gamificationHelper.ts` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å (postsService, markerService –∏ —Ç.–¥.)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Backend –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Backend —Ä–æ—É—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –Ω–∞–∫—Ä—É—Ç–æ–∫
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–∏—Ç—å XP –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞

```typescript
// –í InteractivePostView.tsx
import { useGamification } from '../contexts/GamificationContext';

function InteractivePostView({ postId }) {
  const { addXP } = useGamification();
  const { user } = useAuth();
  
  useEffect(() => {
    if (user?.id) {
      addXP({
        userId: user.id,
        source: 'post_viewed',
        amount: 2,
        contentId: postId,
        contentType: 'post',
      });
    }
  }, [postId, user?.id]);
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

### –ü—Ä–∏–º–µ—Ä 2: –î–æ–±–∞–≤–∏—Ç—å –±—É—Å—Ç –∑–∞ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫

```typescript
// –í gamificationHelper.ts
export async function addXPForPost(postId: string, options: {
  userId: string;
  timeOfDay?: 'morning' | 'afternoon' | 'evening';
}) {
  // –ë–∞–∑–æ–≤—ã–π XP
  await gamificationFacade.addXP({
    userId: options.userId,
    source: 'post_created',
    amount: 50,
    contentId: postId,
  });
  
  // –ë—É—Å—Ç –∑–∞ —É—Ç—Ä–æ
  if (options.timeOfDay === 'morning') {
    await gamificationFacade.addXP({
      userId: options.userId,
      source: 'morning_boost',
      amount: 10,
      contentId: postId,
    });
  }
}
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- `frontend/docs/GAMIFICATION_PLAN.md` - –æ–±—â–∏–π –ø–ª–∞–Ω —Å–∏—Å—Ç–µ–º—ã
- `frontend/docs/GAMIFICATION_IMPLEMENTATION.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `backend/GAMIFICATION_API_README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `backend/create_gamification_tables.sql` - SQL —Å—Ö–µ–º–∞

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.** üöÄ

